{"version":3,"sources":["actions/types.ts","components/Api/api.ts","actions/index.ts","history.ts","components/SnackBar/SnackBarContent.jsx","components/Sidebar/PrivateMessageUserList.tsx","components/Sidebar/ChannelList.tsx","components/Sidebar/ServerList.tsx","components/ActionsModal/ActionsModal.tsx","components/Sidebar/Sidebar.tsx","components/SendMessage/SendMessage.tsx","components/UserInfo/UserInfo.jsx","components/ActiveUserList/ActiveUserList.tsx","components/Header/Header.tsx","components/Messages/Messages.tsx","components/Dashboard/Dashboard.tsx","components/Auth/Auth.tsx","components/App/App.tsx","reducers/chatReducer.ts","reducers/userReducer.ts","reducers/index.ts","index.tsx","middleware/socketMiddleware.ts"],"names":["ACTION","axios","create","baseURL","process","sendMessage","message","type","SEND_SOCKET_MESSAGE","payload","sendPrivateMessage","SEND_SOCKET_PRIVATE_MESSAGE","addChannel","channel","ADD_CHANNEL","addServer","server","ADD_SERVER","updateActiveUserList","serverId","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","response","wrap","_context","prev","next","get","concat","sent","UPDATE_ACTIVE_USERS","data","stop","_x","apply","this","arguments","updateActiveState","UPDATE_ACTIVE_STATE","changeServer","split","CHANGE_SERVER","changeChannel","CHANGE_CHANNEL","changeView","view","CHANGE_VIEW","changePMUser","user","CHANGE_PM_USER","loadUserData","userId","_ref2","_callee2","url","res","_context2","keys","servers","GET_INITIAL_DATA","_x2","signIn","SIGN_IN","signOut","SIGN_OUT","createHashHistory","SnackBarContent","props","content","visible","setVisible","react_default","createElement","Snackbar","open","anchorOrigin","vertical","horizontal","onEntered","setTimeout","PrivateMessageUserList","privateMessages","useSelector","state","chat","userList","useDispatch","className","List","ListItem","map","userItem","i","Slide","direction","in","timeout","key","button","onClick","Avatar","src","alt","height","Typography","variant","ListItemAvatar","Person","ListItemText","primary","userName","Button","localStorage","clear","ChannelList","chatStore","channels","activeServer","setDrawerVisible","setModalVisible","setModalType","handleSnackMessage","_useState","useState","_useState2","slicedToArray","serverAnchorEl","setServerAnchorEl","_useState3","_useState4","channelAnchorEl","setChannelAnchorEl","_useState5","_useState6","isAdmin","setIsAdmin","useEffect","_getAdmin","getAdmin","handleModalShow","modalType","handleSettingsClick","e","currentTarget","handleClose","Fragment","Tooltip","title","placement","IconButton","MoreVert","handleChannelChange","toLowerCase","Settings","Menu","id","anchorEl","Boolean","onClose","MenuItem","text","navigator","clipboard","writeText","callBack","length","ServerList","handleChangeView","undefined","Home","handleServerChange","GroupWork","AddCircleOutline","ActionsModal","_useSelector2","activeChannel","mainVisible","setMainVisible","mainDirection","setMainDirection","createVisible","setCreateVisible","_useState7","_useState8","createDirection","setCreateDirection","_useState9","_useState10","joinVisible","setJoinVisible","_useState11","_useState12","joinDirection","setJoinDirection","_useState13","_useState14","serverName","setServerName","_useState15","_useState16","setServerId","_useState17","_useState18","channelName","setChannelName","handleCreateServer","_response","post","t0","handleJoinServer","_response2","_x3","_x4","handleRenameServer","_ref3","_callee3","_response3","_context3","_x5","_x6","handleDeleteServer","_ref4","_callee4","_response4","_context4","delete","_x7","_x8","handleCreateChannel","_ref5","_callee5","_response5","_context5","_x9","_x10","handleRenameChannel","_ref6","_callee6","channelId","_response6","_context6","_x11","_x12","handleDeleteChannel","_ref7","_callee7","_response7","_context7","_x13","_x14","handleKeyPress","callbackMethod","Paper","mountOnEnter","unmountOnExit","Grid","container","spacing","justify","alignItems","item","xs","color","align","sm","Card","CardActionArea","CardContent","gutterBottom","paragraph","CardMedia","AddToQueue","GroupAdd","TextField","label","value","onChange","target","onKeyPress","margin","autoComplete","style","backgroundColor","marginRight","marginLeft","Sidebar","activeView","modalVisible","snackContent","setSnackContent","snackVisible","setSnackVisible","pass","Modal","aria-labelledby","aria-describedby","SendMessage","_useSelector","activePMUser","chatMessage","setChatMessage","emojiMenuVisible","setEmojiMenuVisible","placeholderTitle","setPlaceholderTitle","handleSubmit","msg","validMessage","trim","isValidMessage","replace","window","onclick","String","includes","TextareaAutosize","aria-label","placeholder","handleOnChange","shiftKey","from","to","SentimentVerySatisfied_default","dist_es","set","onSelect","native","handleEmojiClick","useStyle","makeStyles","theme","card","display","flexDirection","justifyContent","textAlign","width","background","cardHeader","image","marginTop","marginBottom","cardInput","padding","input","UserInfo","setUserInfoVisible","classes","messageText","setMessageText","handleSendPrivateMessage","InputProps","InputLabelProps","shrink","ActiveUserList","activeUserList","userInfoVisible","setUserName","setAnchorEl","handleUserClick","user_name","Popover","Header","sideBarDrawerVisible","setSideBarDrawerVisible","userListDrawerVisible","setUserListDrawerVisible","setTitle","AppBar","position","Toolbar","edge","Menu_default","SwipeableDrawer","anchor","onOpen","Link","href","SvgIcon","d","Messages","messageIndex","setMessageIndex","loadMessages","setLoadMessages","messageContainerBottomRef","document","getElementById","messageContainerRef","messages","messagesLength","scroll","scrollIntoView","block","behavior","formatCode","PR","prettyPrint","onScroll","element","scrollTop","handleScrollTop","ref","CircularProgress","slice","Fade","startsWith","endsWith","isTextCodeBlock","moment","date","format","secondary","dangerouslySetInnerHTML","__html","Dashboard","isSignedIn","updateActiveStatus","push","addEventListener","vh","innerHeight","documentElement","setProperty","Auth","loginVisible","setLoginVisible","loginDirection","setLoginDirection","userNameError","setUserNameError","userNameErrorMsg","setUserNameErrorMsg","_useState19","_useState20","userPass","setUserPass","_useState21","_useState22","userPassError","setUserPassError","_useState23","_useState24","userPassErrorMsg","setUserPassErrorMsg","_useState25","_useState26","rememberMe","setRememberMe","showMain","handleOnSubmit","error","handleCreateAccount","errorData","encodeURIComponent","setItem","JSON","stringify","handleLoginAccount","ArrowBack","helperText","Checkbox","checked","App","ThemeProvider","react_router_dom","parse","getItem","checkLocalStorageAuth","react_router","path","exact","component","createMuiTheme","overrides","MuiTooltip","tooltip","fontSize","MuiSnackbarContent","root","MuiAppBar","colorPrimary","palette","main","typography","fontFamily","fontWeightLight","fontWeightRegular","fontWeightMedium","initialState","Default-FANfDprXmt","general-0m5vBsRnfd","combineReducers","action","RECEIVE_SOCKET_MESSAGE","_action$payload","objectSpread","defineProperty","toConsumableArray","RECEIVE_SOCKET_PRIVATE_MESSAGE","baseUrl","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","storeAPI","socket","io","emit","on","setupSocketListener","serverIds","forEach","ReactDOM","render","es","components_App_App"],"mappings":"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","file":"static/js/main.78e624ae.chunk.js","sourcesContent":["export enum ACTION {\r\n  RECEIVE_SOCKET_MESSAGE,\r\n  RECEIVE_SOCKET_PRIVATE_MESSAGE,\r\n  SEND_SOCKET_MESSAGE,\r\n  SEND_SOCKET_PRIVATE_MESSAGE,\r\n  ADD_SERVER,\r\n  ADD_PRIVATE_MESSAGE,\r\n  ADD_CHANNEL,\r\n  CHANGE_CHANNEL,\r\n  CHANGE_SERVER,\r\n  CHANGE_VIEW,\r\n  CHANGE_PM_USER,\r\n  UPDATE_ACTIVE_USERS,\r\n  UPDATE_ACTIVE_STATE,\r\n  SIGN_IN,\r\n  SIGN_OUT,\r\n  GET_INITIAL_DATA\r\n}\r\n\r\nexport type ChatActionTypes =\r\n  | ReceiveMessageAction\r\n  | ReceivePrivateMessageAction\r\n  | AddChannelAction\r\n  | AddServerAction\r\n  | ChangeServerAction\r\n  | ChangeChannelAction\r\n  | ChangeViewAction\r\n  | ChangePmUserAction\r\n  | LoadUserDataAction\r\n  | UpdateActiveUsersAction;\r\n\r\nexport type SocketActions =\r\n  | SendMessageAction\r\n  | SendPrivateMessageAction\r\n  | SignInAction\r\n  | LoadUserDataAction\r\n  | AddServerAction\r\n  | UpdateActiveStateAction;\r\n\r\nexport type UserActionTypes = SignInAction | SignOutAction;\r\n\r\n/* Actions Types */\r\nexport type SendMessageAction = {\r\n  type: ACTION.SEND_SOCKET_MESSAGE;\r\n  payload: SendMessageData;\r\n};\r\n\r\nexport type ReceiveMessageAction = {\r\n  type: ACTION.RECEIVE_SOCKET_MESSAGE;\r\n  payload: ReceiveMessageData;\r\n};\r\n\r\nexport type SendPrivateMessageAction = {\r\n  type: ACTION.SEND_SOCKET_PRIVATE_MESSAGE;\r\n  payload: SendPrivateMessageData;\r\n};\r\n\r\nexport type ReceivePrivateMessageAction = {\r\n  type: ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE;\r\n  payload: ReceivePrivateMessageData;\r\n};\r\n\r\nexport type AddChannelAction = {\r\n  type: ACTION.ADD_CHANNEL;\r\n  payload: AddChannelData;\r\n};\r\n\r\nexport type AddServerAction = {\r\n  type: ACTION.ADD_SERVER;\r\n  payload: AddServerData;\r\n};\r\n\r\nexport type UpdateActiveUsersAction = {\r\n  type: ACTION.UPDATE_ACTIVE_USERS;\r\n  payload: { user_name: string }[];\r\n};\r\n\r\nexport type UpdateActiveStateAction = {\r\n  type: ACTION.UPDATE_ACTIVE_STATE;\r\n  payload: null;\r\n};\r\n\r\nexport type ChangeServerAction = {\r\n  type: ACTION.CHANGE_SERVER;\r\n  payload: string;\r\n};\r\n\r\nexport type ChangeChannelAction = {\r\n  type: ACTION.CHANGE_CHANNEL;\r\n  payload: string;\r\n};\r\n\r\nexport type ChangeViewAction = {\r\n  type: ACTION.CHANGE_VIEW;\r\n  payload: string;\r\n};\r\n\r\nexport type ChangePmUserAction = {\r\n  type: ACTION.CHANGE_PM_USER;\r\n  payload: string;\r\n};\r\n\r\nexport type LoadUserDataAction = {\r\n  type: ACTION.GET_INITIAL_DATA;\r\n  payload: LoadInitialData;\r\n};\r\n\r\nexport type SignInAction = {\r\n  type: ACTION.SIGN_IN;\r\n  payload: SignInData;\r\n};\r\n\r\nexport type SignOutAction = {\r\n  type: ACTION.SIGN_OUT;\r\n  payload: null;\r\n};\r\n\r\n/* Interfaces for Data coming into Action Creators */\r\n\r\nexport interface SendMessageData {\r\n  type: 'channelMessage';\r\n  server: string;\r\n  channel: string;\r\n  from: string;\r\n  msg: string;\r\n}\r\n\r\nexport interface SendPrivateMessageData {\r\n  type: 'privateMessage';\r\n  from: string;\r\n  to: string;\r\n  msg: string;\r\n}\r\n\r\nexport interface ReceiveMessageData {\r\n  server: string;\r\n  channel: string;\r\n  from: string;\r\n  msg: string;\r\n  date: Date;\r\n}\r\n\r\nexport interface ReceivePrivateMessageData {\r\n  user: string;\r\n  from: string;\r\n  to: string;\r\n  msg: string;\r\n  date: Date;\r\n}\r\n\r\nexport interface AddChannelData {\r\n  server: string;\r\n  channel: string;\r\n}\r\n\r\nexport interface AddServerData {\r\n  server: string;\r\n  channel: string;\r\n}\r\n\r\nexport interface LoadInitialData {\r\n  servers: {\r\n    [serverName: string]: {\r\n      channels: {\r\n        [channelName: string]: { from: string; to: string; msg: string; date: Date }[];\r\n      };\r\n    };\r\n  };\r\n  privateMessages: {\r\n    [userPM: string]: { from: string; to: string; msg: string; user: string; date: Date }[];\r\n  };\r\n}\r\n\r\nexport interface SignInData {\r\n  userId: string;\r\n  userName: string;\r\n}\r\n","import axios from 'axios';\r\n\r\nconst baseUrl = process.env.NODE_ENV === 'development' ? 'http://localhost:3001' : process.env.REACT_APP_API_URL;\r\n\r\nexport default axios.create({\r\n  baseURL: baseUrl\r\n});\r\n","import axios from '../components/Api/api';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AnyAction } from 'redux';\r\n\r\nimport {\r\n  ACTION,\r\n  UpdateActiveStateAction,\r\n  ChangeServerAction,\r\n  ChangeChannelAction,\r\n  ChangeViewAction,\r\n  ChangePmUserAction,\r\n  LoadUserDataAction,\r\n  LoadInitialData,\r\n  SignInAction,\r\n  SignInData,\r\n  SignOutAction\r\n} from './types';\r\nimport {\r\n  SendMessageData,\r\n  ReceiveMessageData,\r\n  SendPrivateMessageData,\r\n  ReceivePrivateMessageData,\r\n  AddChannelData,\r\n  AddServerData\r\n} from './types';\r\nimport {\r\n  SendMessageAction,\r\n  ReceiveMessageAction,\r\n  SendPrivateMessageAction,\r\n  ReceivePrivateMessageAction,\r\n  AddChannelAction,\r\n  AddServerAction\r\n} from './types';\r\n\r\n// Action to send a message (Handled by socket middleware)\r\nexport const sendMessage = (message: SendMessageData): SendMessageAction => ({\r\n  type: ACTION.SEND_SOCKET_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to add message to a channel (Handled by socket middleware)\r\nexport const receiveMessage = (message: ReceiveMessageData): ReceiveMessageAction => ({\r\n  type: ACTION.RECEIVE_SOCKET_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to send new private message (Handled by socket middleware)\r\nexport const sendPrivateMessage = (message: SendPrivateMessageData): SendPrivateMessageAction => ({\r\n  type: ACTION.SEND_SOCKET_PRIVATE_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to send new private message (Handled by socket middleware)\r\nexport const receivePrivateMessage = (message: ReceivePrivateMessageData): ReceivePrivateMessageAction => ({\r\n  type: ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to add Channel to a Server\r\nexport const addChannel = (channel: AddChannelData): AddChannelAction => ({\r\n  type: ACTION.ADD_CHANNEL,\r\n  payload: channel\r\n});\r\n\r\n// Action to add Server to server list\r\nexport const addServer = (server: AddServerData): AddServerAction => ({\r\n  type: ACTION.ADD_SERVER,\r\n  payload: server\r\n});\r\n\r\n// Get active user list in given server\r\nexport const updateActiveUserList = (serverId: string) => async (dispatch: ThunkDispatch<{}, {}, AnyAction>) => {\r\n  const response = await axios.get(`/server/activeusers?serverId=${serverId}`);\r\n  dispatch({ type: ACTION.UPDATE_ACTIVE_USERS, payload: response.data });\r\n};\r\n\r\n// Action creator to update active state (socket middleware)\r\nexport const updateActiveState = (): UpdateActiveStateAction => ({\r\n  type: ACTION.UPDATE_ACTIVE_STATE,\r\n  payload: null\r\n});\r\n\r\n// Action to change the current Active Server\r\nexport const changeServer = (server: string) => (dispatch: ThunkDispatch<{}, {}, AnyAction>) => {\r\n  dispatch(updateActiveUserList(server.split('-')[1]));\r\n  dispatch<ChangeServerAction>({ type: ACTION.CHANGE_SERVER, payload: server });\r\n};\r\n\r\n// Action to change the current Active Channel\r\nexport const changeChannel = (channel: string): ChangeChannelAction => ({\r\n  type: ACTION.CHANGE_CHANNEL,\r\n  payload: channel\r\n});\r\n\r\n// Action to change the current active view\r\nexport const changeView = (view: string): ChangeViewAction => ({\r\n  type: ACTION.CHANGE_VIEW,\r\n  payload: view\r\n});\r\n\r\n// Action to change active user we have private message open with\r\nexport const changePMUser = (user: string): ChangePmUserAction => ({\r\n  type: ACTION.CHANGE_PM_USER,\r\n  payload: user\r\n});\r\n\r\n// Loads user Data. Gets all Servers + Channel History\r\nexport const loadUserData = (userId: string) => async (dispatch: ThunkDispatch<{}, {}, AnyAction>) => {\r\n  let url = `/user/data?userId=${userId}`;\r\n  const res = await axios.get<LoadInitialData>(url);\r\n  // get active user list for first server\r\n  dispatch(updateActiveUserList(Object.keys(res.data.servers)[0].split('-')[1]));\r\n  dispatch<LoadUserDataAction>({ type: ACTION.GET_INITIAL_DATA, payload: res.data });\r\n};\r\n\r\n// On sign in\r\nexport const signIn = (user: SignInData): SignInAction => ({\r\n  type: ACTION.SIGN_IN,\r\n  payload: user\r\n});\r\n\r\n// On sign out\r\nexport const signOut = (): SignOutAction => ({\r\n  type: ACTION.SIGN_OUT,\r\n  payload: null\r\n});\r\n","import { createHashHistory } from 'history';\r\n\r\nexport default createHashHistory();\r\n","import React from 'react'\r\nimport { Snackbar } from '@material-ui/core';\r\n\r\n// Snackbar that allows you to set the content, visibility \r\n// and change visibility from parent component\r\nexport default function SnackBarContent(props) {\r\n\r\n  const { content, visible, setVisible } = props;\r\n\r\n  // When opened, closes itself after 2.5sec\r\n  const handleSnackBarOpen = () => {\r\n    setTimeout(() => {\r\n      setVisible(false);\r\n    }, 2500)\r\n  }\r\n\r\n  return (\r\n    <Snackbar\r\n      open={visible}\r\n      message={content}\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left'\r\n      }}\r\n      onEntered={() => handleSnackBarOpen()}\r\n    />\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { List, ListItem, ListItemAvatar, Avatar, ListItemText, Slide, Button, Typography } from '@material-ui/core';\r\nimport { Person } from '@material-ui/icons';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { signOut, changePMUser } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function PrivateMessageUserList() {\r\n  // Get from Redux store\r\n  const { privateMessages } = useSelector((state: StoreState) => state.chat);\r\n  const user = useSelector((state: StoreState) => state.user);\r\n  const userList = Object.keys(privateMessages);\r\n  const dispatch = useDispatch();\r\n\r\n  // Signs the user out\r\n  const handleSignOut = () => {\r\n    localStorage.clear();\r\n    dispatch(signOut());\r\n  };\r\n\r\n  return (\r\n    <div className=\"channels-container\">\r\n      <List className=\"channel-list\">\r\n        <ListItem className=\"title-container\">Home</ListItem>\r\n        {userList.map((userItem, i) => (\r\n          <Slide direction=\"right\" in={true} timeout={200 * (i + 1)} key={i}>\r\n            <ListItem button className=\"user-item\" onClick={() => dispatch(changePMUser(userItem))}>\r\n              <Avatar>\r\n                {' '}\r\n                <img className=\"user\" src={process.env.PUBLIC_URL + '/user.png'} alt=\"user icon\" height=\"48\" />{' '}\r\n              </Avatar>\r\n              <Typography variant=\"body1\" className=\"user-list-name\">\r\n                {userItem}\r\n              </Typography>\r\n            </ListItem>\r\n          </Slide>\r\n        ))}\r\n      </List>\r\n\r\n      <div className=\"user-options\">\r\n        <ListItem className=\"user-info\">\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <Person />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary={user.userName} />\r\n          <Button onClick={handleSignOut}>Sign out</Button>\r\n        </ListItem>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Person, MoreVert, Settings } from '@material-ui/icons';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  Avatar,\r\n  Tooltip,\r\n  IconButton,\r\n  Typography,\r\n  ListItemText,\r\n  Menu,\r\n  MenuItem,\r\n  Slide,\r\n  Button\r\n} from '@material-ui/core';\r\nimport { changeChannel, signOut } from '../../actions';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport axios from '../Api/api';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface ChannelListProps {\r\n  setDrawerVisible?: (drawerVisible: boolean) => void;\r\n  setModalVisible: (modalVisible: boolean) => void;\r\n  setModalType: (modalType: string) => void;\r\n  handleSnackMessage: (response: string, pass: boolean) => void;\r\n}\r\n\r\nexport default function ChannelList(props: ChannelListProps) {\r\n  // Get State from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const channels = Object.keys(chatStore.servers[chatStore.activeServer]['channels']);\r\n  const { activeServer } = chatStore;\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state: StoreState) => state.user);\r\n\r\n  // Get props from parent\r\n  const { setDrawerVisible, setModalVisible, setModalType, handleSnackMessage } = props;\r\n\r\n  // Local state\r\n  const [serverAnchorEl, setServerAnchorEl] = useState(null);\r\n  const [channelAnchorEl, setChannelAnchorEl] = useState(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  // When user or active server changes, check if we are admin\r\n  useEffect(() => {\r\n    // Gets the status if we are admin of current server (allows us to change server settings)\r\n    async function getAdmin() {\r\n      let serverId = activeServer.split('-')[1];\r\n      const response = await axios.get(`/server/admin?serverId=${serverId}&userId=${user.userId}`);\r\n      setIsAdmin(response.data);\r\n    }\r\n\r\n    getAdmin();\r\n  }, [activeServer, user]);\r\n\r\n  // Handle channel change, and closes drawer if on mobile view\r\n  const handleChannelChange = (channel: string) => {\r\n    dispatch(changeChannel(channel));\r\n    if (typeof setDrawerVisible !== 'undefined') setDrawerVisible(false);\r\n  };\r\n\r\n  // Checks if only 1 channel, if so does not call callback to delete channel\r\n  const handleChannelDelete = (callBack: Function) => {\r\n    if (channels.length === 1) {\r\n      handleSnackMessage('Please delete the server if only 1 channel', false);\r\n    } else {\r\n      callBack();\r\n    }\r\n  };\r\n\r\n  // Handles to show modal, and its type\r\n  const handleModalShow = (modalType: string) => {\r\n    setModalType(modalType);\r\n    setModalVisible(true);\r\n  };\r\n\r\n  // Handles showing of Settings Menu\r\n  const handleSettingsClick = (e: any, type: string) => {\r\n    if (type === 'server') setServerAnchorEl(e.currentTarget);\r\n    else if (type === 'channel') setChannelAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  // Handles closing settings menu\r\n  const handleClose = () => {\r\n    setServerAnchorEl(null);\r\n    setChannelAnchorEl(null);\r\n  };\r\n\r\n  // Signs the user out\r\n  const handleSignOut = () => {\r\n    localStorage.clear();\r\n    dispatch(signOut());\r\n  };\r\n\r\n  // Handles saving serverId to clipboard\r\n  const handleSaveClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    handleSnackMessage(`Server ID ${text} saved to clipboard`, false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"channels-container\">\r\n      <List className=\"channel-list\">\r\n        <ListItem className=\"title-container\">\r\n          {activeServer.split('-')[0]}\r\n          {isAdmin ? (\r\n            <React.Fragment>\r\n              <Tooltip title=\"Server Settings\" key=\"server-settings\" placement=\"right\" className=\"tooltip\">\r\n                <IconButton onClick={e => handleSettingsClick(e, 'server')}>\r\n                  {' '}\r\n                  <MoreVert />{' '}\r\n                </IconButton>\r\n              </Tooltip>\r\n            </React.Fragment>\r\n          ) : null}\r\n        </ListItem>\r\n        {channels.map((channel, i) => (\r\n          <Slide direction=\"right\" in={true} timeout={200 * (i + 1)} key={channel + activeServer}>\r\n            <ListItem onClick={e => handleChannelChange(channel)} button className=\"channel-item\">\r\n              <Typography variant=\"body1\">\r\n                <i className=\"channel-hashtag\">#</i>\r\n                {channel.split('-')[0].toLowerCase()}\r\n              </Typography>\r\n              {isAdmin ? (\r\n                <Tooltip title=\"Server Settings\" key=\"server-settings\" placement=\"right\" className=\"tooltip\">\r\n                  <IconButton onClick={e => handleSettingsClick(e, 'channel')}>\r\n                    {' '}\r\n                    <Settings className=\"channel-settings\" />{' '}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              ) : null}\r\n            </ListItem>\r\n          </Slide>\r\n        ))}\r\n      </List>\r\n\r\n      <div className=\"user-options\">\r\n        <ListItem className=\"user-info\">\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <Person />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary={user.userName} />\r\n          <Button onClick={handleSignOut}>Sign out</Button>\r\n        </ListItem>\r\n      </div>\r\n\r\n      <Menu\r\n        id=\"server-settings-menu\"\r\n        anchorEl={serverAnchorEl}\r\n        open={Boolean(serverAnchorEl)}\r\n        onClick={handleClose}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem onClick={() => handleSaveClipboard(activeServer.split('-')[1])}>\r\n          {' '}\r\n          Server Id - {activeServer.split('-')[1]}{' '}\r\n        </MenuItem>\r\n        <MenuItem onClick={() => handleModalShow('server-rename')}> Change Server Name </MenuItem>\r\n        <MenuItem onClick={() => handleModalShow('server-delete')}> Delete Server </MenuItem>\r\n        <MenuItem onClick={() => handleModalShow('channel-create')}> Add Channel </MenuItem>\r\n      </Menu>\r\n\r\n      <Menu\r\n        id=\"channel-settings-menu\"\r\n        anchorEl={channelAnchorEl}\r\n        open={Boolean(channelAnchorEl)}\r\n        onClick={handleClose}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem onClick={() => handleModalShow('channel-rename')}> Change Channel Name </MenuItem>\r\n        <MenuItem onClick={() => handleChannelDelete(() => handleModalShow('channel-delete'))}>\r\n          {' '}\r\n          Delete Channel{' '}\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { GroupWork, AddCircleOutline, Home } from '@material-ui/icons';\r\nimport { List, Tooltip, IconButton } from '@material-ui/core';\r\nimport { changeServer, changeView } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface ServerListProps {\r\n  setModalVisible: (modalVisible: boolean) => void;\r\n  setModalType: (modalType: string) => void;\r\n}\r\n\r\nexport default function ServerList(props: ServerListProps) {\r\n  // Get State from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const servers = Object.keys(chatStore.servers);\r\n  const dispatch = useDispatch();\r\n\r\n  // Get props from parent\r\n  const { setModalVisible, setModalType } = props;\r\n\r\n  // Handles server change, and closes drawer if on mobile view\r\n  const handleServerChange = (server: string) => {\r\n    dispatch(changeServer(server));\r\n  };\r\n\r\n  // Handles to show modal, and its type\r\n  const handleModalShow = () => {\r\n    setModalType('server-create-join');\r\n    setModalVisible(true);\r\n  };\r\n\r\n  // Handles changing the view and calls callback function\r\n  const handleChangeView = (view: string, callBack?: Function) => {\r\n    dispatch(changeView(view));\r\n    if (callBack !== undefined) callBack();\r\n  };\r\n\r\n  return (\r\n    <div className=\"servers-container\">\r\n      <List>\r\n        <Tooltip title=\"Home\" key=\"home\" placement=\"right\" className=\"tooltip\">\r\n          <IconButton className=\"home-icon\" onClick={() => handleChangeView('home')}>\r\n            <Home />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <div className=\"menu-seperator\" />\r\n\r\n        {servers.map(server => (\r\n          <Tooltip title={server.split('-')[0]} key={server} placement=\"right\" className=\"tooltip\">\r\n            <IconButton\r\n              className=\"server-icon\"\r\n              onClick={() => handleChangeView('servers', () => handleServerChange(server))}\r\n            >\r\n              <GroupWork />\r\n            </IconButton>\r\n          </Tooltip>\r\n        ))}\r\n\r\n        <Tooltip title=\"Create Server\" key=\"create-server\" placement=\"right\" className=\"tooltip\">\r\n          <IconButton className=\"server-icon\" onClick={() => handleChangeView('servers', () => handleModalShow())}>\r\n            <AddCircleOutline />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, KeyboardEvent } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n  Paper,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  CardActionArea,\r\n  CardMedia,\r\n  Slide,\r\n  TextField,\r\n  Grid\r\n} from '@material-ui/core';\r\nimport { GroupAdd, AddToQueue } from '@material-ui/icons';\r\nimport axios from '../Api/api';\r\n\r\nimport { addChannel, addServer } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface ActionsModalProps {\r\n  handleSnackMessage: (response: string, pass: boolean) => void;\r\n  modalType: string;\r\n}\r\n\r\nexport default function ActionsModal(props: ActionsModalProps) {\r\n  // Get State from Redux Store\r\n  const { userId } = useSelector((state: StoreState) => state.user);\r\n  const { activeServer, activeChannel } = useSelector((state: StoreState) => state.chat);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // Get data from props\r\n  const { handleSnackMessage, modalType } = props;\r\n\r\n  // Local state to control Modal Windows + Data fields\r\n  const [mainVisible, setMainVisible] = useState(true);\r\n  const [mainDirection, setMainDirection]: any = useState('left');\r\n  const [createVisible, setCreateVisible] = useState(false);\r\n  const [createDirection, setCreateDirection]: any = useState('left');\r\n  const [joinVisible, setJoinVisible] = useState(false);\r\n  const [joinDirection, setJoinDirection]: any = useState('left');\r\n  const [serverName, setServerName] = useState('');\r\n  const [serverId, setServerId] = useState('');\r\n  const [channelName, setChannelName] = useState('');\r\n\r\n  // Handles showing the Join Server window\r\n  const showhandleJoinServer = () => {\r\n    setMainDirection('right');\r\n    setCreateDirection('left');\r\n    setJoinVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Handles showing the Create Server window\r\n  const showhandleCreateServer = () => {\r\n    setMainDirection('right');\r\n    setJoinDirection('left');\r\n    setCreateVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Method to handle creation of servers\r\n  const handleCreateServer = async (serverName: string, userId: string) => {\r\n    try {\r\n      const response = await axios.post(`/server/create?serverName=${serverName}&userId=${userId}`);\r\n      dispatch(addServer(response.data));\r\n      const message = `Server ${response.data.server.split('-')[0]} with ID ${\r\n        response.data.server.split('-')[1]\r\n      } created`;\r\n      handleSnackMessage(message, false);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle joining of servers\r\n  const handleJoinServer = async (serverId: string, userId: string) => {\r\n    try {\r\n      const response = await axios.post(`/server/join?serverId=${serverId}&userId=${userId}`);\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle renaming of servers\r\n  const handleRenameServer = async (serverName: string, serverId: string) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `/server/rename?serverName=${serverName}&serverId=${serverId}&userId=${userId}`\r\n      );\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle deleting servers\r\n  const handleDeleteServer = async (serverId: string, userId: string) => {\r\n    try {\r\n      const response = await axios.delete(`/server/delete?serverId=${serverId}&userId=${userId}`);\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle creation of channels\r\n  const handleCreateChannel = async (channelName: string, server: string) => {\r\n    try {\r\n      const response = await axios.post(`/channel/create?channelName=${channelName}&server=${server}&userId=${userId}`);\r\n      dispatch(addChannel(response.data));\r\n      const message = `Server ${response.data.channel.split('-')[0]} with ID ${response.data.channel.split(\r\n        '-'[1]\r\n      )} created`;\r\n      handleSnackMessage(message, false);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle renaming of channels\r\n  const handleRenameChannel = async (channelName: string, channelId: string) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `/channel/rename?channelName=${channelName}&channelId=${channelId}&serverId=${\r\n          activeServer.split('-')[1]\r\n        }&userId=${userId}`\r\n      );\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle deleting of channels\r\n  const handleDeleteChannel = async (channelName: string, channelId: string) => {\r\n    try {\r\n      const response = await axios.delete(\r\n        `/channel/delete?channelId=${channelId}&serverId=${activeServer.split('-')[1]}&userId=${userId}`\r\n      );\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Handles keypress and calls the callback method\r\n  const handleKeyPress = (e: KeyboardEvent, callbackMethod: Function) => {\r\n    if (e.key === 'Enter') {\r\n      callbackMethod();\r\n    }\r\n  };\r\n\r\n  // Renders the Main Modal Window with options to Create / Join server\r\n  const renderMainServer = () => {\r\n    return (\r\n      <Slide direction={mainDirection} in={mainVisible} timeout={500} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Another server? Wow you're popular!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showhandleCreateServer()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"primary\" gutterBottom>\r\n                    Create\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Create a server and invite all your buddies.\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <AddToQueue className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"primary\" className=\"modal-button\">\r\n                    Join a server\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showhandleJoinServer()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"secondary\" gutterBottom>\r\n                    Join\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Join a friends server and pwn some noobs!\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <GroupAdd className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"secondary\" className=\"modal-button\">\r\n                    Join a server\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the Server Create Modal Window\r\n  const renderServerCreate = () => {\r\n    return (\r\n      <Slide direction={createDirection} in={createVisible} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create a Server!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a Server Name to create a server and get access to unlimited chat channels!{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-server-field\"\r\n              label=\"Server Name\"\r\n              value={serverName}\r\n              onChange={e => setServerName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleCreateServer(serverName, userId))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleCreateServer(serverName, userId)}\r\n            >\r\n              Create Server\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal with an input\r\n  const renderServerRename = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Rename Server\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a new Server Name for Server - {activeServer.split('-')[0]}{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-channel-field\"\r\n              label=\"Channel Name\"\r\n              value={serverName}\r\n              onChange={e => setServerName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleRenameServer(serverName, activeServer.split('-')[1]))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleRenameServer(serverName, activeServer.split('-')[1])}\r\n            >\r\n              Rename Server\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal to delete a server\r\n  const renderServerDelete = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Delete Server\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Are you sure you want to delete - {activeServer.split('-')[0]}{' '}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'green', marginRight: '8px' }}\r\n              onClick={() => handleDeleteServer(activeServer.split('-')[1], userId)}\r\n            >\r\n              Yes\r\n            </Button>\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'red', marginLeft: '8px' }}\r\n              onClick={() => handleSnackMessage('Not deleting channel', false)}\r\n            >\r\n              No\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the Server Join Modal Window\r\n  const renderServerJoin = () => {\r\n    return (\r\n      <Slide direction={joinDirection} in={joinVisible} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Join a Server!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a the Server Id provided by your friend and start chatting right now!{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"join-server-field\"\r\n              label=\"Server Id\"\r\n              value={serverId}\r\n              onChange={e => setServerId(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleJoinServer(serverId, userId))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleJoinServer(serverId, userId)}\r\n            >\r\n              Join Server\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the Channel Create Modal Window\r\n  const renderChannelCreate = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create a Channel!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a Channel Name for your new channel and start chatting right now!{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-channel-field\"\r\n              label=\"Channel Name\"\r\n              value={channelName}\r\n              onChange={e => setChannelName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleCreateChannel(channelName, activeServer))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleCreateChannel(channelName, activeServer)}\r\n            >\r\n              Create Channel\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal to rename a channel\r\n  const renderChannelRename = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Rename Chanel\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a new Channel Name for Channel - {activeChannel.split('-')[0]}{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-channel-field\"\r\n              label=\"Channel Name\"\r\n              value={channelName}\r\n              onChange={e => setChannelName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleRenameChannel(channelName, activeChannel.split('-')[1]))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleRenameChannel(channelName, activeChannel.split('-')[1])}\r\n            >\r\n              Rename Channel\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal to delete a channel\r\n  const renderChannelDelete = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Delete Channel\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Are you sure you want to delete - {activeChannel.split('-')[0]}{' '}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'green', marginRight: '8px' }}\r\n              onClick={() => handleDeleteChannel(channelName, activeChannel.split('-')[1])}\r\n            >\r\n              Yes\r\n            </Button>\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'red', marginLeft: '8px' }}\r\n              onClick={() => handleSnackMessage('Not deleting channel', false)}\r\n            >\r\n              No\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  if (modalType === 'server-create-join')\r\n    return (\r\n      <Paper className=\"container-prompt\">\r\n        {renderMainServer()}\r\n        {renderServerCreate()}\r\n        {renderServerJoin()}\r\n      </Paper>\r\n    );\r\n  else if (modalType === 'channel-create') {\r\n    return <Paper className=\"container-prompt\">{renderChannelCreate()}</Paper>;\r\n  } else if (modalType === 'server-rename') {\r\n    return <Paper className=\"container-prompt\">{renderServerRename()}</Paper>;\r\n  } else if (modalType === 'channel-rename') {\r\n    return <Paper className=\"container-prompt\">{renderChannelRename()}</Paper>;\r\n  } else if (modalType === 'channel-delete') {\r\n    return <Paper className=\"container-prompt\">{renderChannelDelete()}</Paper>;\r\n  } else if (modalType === 'server-delete') {\r\n    return <Paper className=\"container-prompt\">{renderServerDelete()}</Paper>;\r\n  } else return null;\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Modal } from '@material-ui/core';\r\n\r\nimport SnackBarContent from '../SnackBar/SnackBarContent';\r\nimport PrivateMessageUserList from './PrivateMessageUserList';\r\nimport ChannelList from './ChannelList';\r\nimport ServerList from './ServerList';\r\nimport ActionsModal from '../ActionsModal/ActionsModal';\r\nimport { loadUserData } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface SidebarProps {\r\n  setDrawerVisible?: (drawerVisible: boolean) => void;\r\n}\r\n\r\nexport default function Sidebar(props: SidebarProps) {\r\n  // Get from Redux Store\r\n  const user = useSelector((state: StoreState) => state.user);\r\n  const { activeView } = useSelector((state: StoreState) => state.chat);\r\n\r\n  // Dispatch\r\n  const dispatch = useDispatch();\r\n\r\n  // Get props from parent (Used when Sidebar is rendered by header on mobile)\r\n  const { setDrawerVisible } = props;\r\n\r\n  // Local state\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [modalType, setModalType] = useState('');\r\n  const [snackContent, setSnackContent] = useState('');\r\n  const [snackVisible, setSnackVisible] = useState(false);\r\n\r\n  // Handles Success of Modal Server Create / Join\r\n  // Closes Modal and show Snackbar with Create / Join Messsage\r\n  const handleSnackMessage = (response: string, pass: boolean) => {\r\n    if (response !== null) {\r\n      setModalVisible(false);\r\n      setSnackVisible(true);\r\n      setSnackContent(response);\r\n      if (pass) dispatch(loadUserData(user.userId));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"sidebar-container\">\r\n      <ServerList setModalVisible={setModalVisible} setModalType={setModalType} />\r\n      {activeView === 'servers' ? (\r\n        <ChannelList\r\n          setDrawerVisible={setDrawerVisible}\r\n          setModalVisible={setModalVisible}\r\n          setModalType={setModalType}\r\n          handleSnackMessage={handleSnackMessage}\r\n        />\r\n      ) : (\r\n        <PrivateMessageUserList />\r\n      )}\r\n      <Modal\r\n        open={modalVisible}\r\n        aria-labelledby=\"server create modal\"\r\n        aria-describedby=\"create a server\"\r\n        className=\"modal-wrapper\"\r\n        onClose={() => setModalVisible(false)}\r\n      >\r\n        <ActionsModal handleSnackMessage={handleSnackMessage} modalType={modalType} />\r\n      </Modal>\r\n      <SnackBarContent visible={snackVisible} setVisible={setSnackVisible} content={snackContent} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, ChangeEvent } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport 'emoji-mart/css/emoji-mart.css';\r\nimport { Picker } from 'emoji-mart';\r\nimport SmileyFace from '@material-ui/icons/SentimentVerySatisfied';\r\nimport { StoreState } from '../../reducers';\r\nimport { sendMessage, sendPrivateMessage } from '../../actions';\r\nimport { SendMessageData, SendPrivateMessageData } from '../../actions/types';\r\n\r\nexport default function SendMessage() {\r\n  // Get State from Redux Store\r\n  const { activeServer, activeChannel, activeView, activePMUser } = useSelector((state: StoreState) => state.chat);\r\n  const { userName } = useSelector((state: StoreState) => state.user);\r\n  const dispatch = useDispatch();\r\n\r\n  // Local state\r\n  const [chatMessage, setChatMessage] = useState('');\r\n  const [emojiMenuVisible, setEmojiMenuVisible] = useState(false);\r\n  const [placeholderTitle, setPlaceholderTitle] = useState('');\r\n\r\n  // Check active view to determine where we send our messages\r\n  useEffect(() => {\r\n    if (activeView === 'servers') {\r\n      setPlaceholderTitle(activeChannel.split('-')[0]);\r\n    } else if (activeView === 'home') {\r\n      setPlaceholderTitle(activePMUser);\r\n    }\r\n  }, [activeView, activeChannel, activePMUser]);\r\n\r\n  // Checks is message is valid (not just spaces)\r\n  function isValidMessage(msg: string) {\r\n    let validMessage = true;\r\n    // Check if empty stirng\r\n    if (msg.trim() === '') validMessage = false;\r\n    return validMessage;\r\n  }\r\n\r\n  // Will format out multiple line breaks to 2 max\r\n  function formatMessage(msg: string) {\r\n    return msg.replace(/(\\r\\n|\\r|\\n){3,}/g, '$1\\n\\n');\r\n  }\r\n\r\n  // Handles submission of messages\r\n  // Dispatches event and sets TextField value to empty\r\n  function handleSubmit(message: SendMessageData | SendPrivateMessageData) {\r\n    if (isValidMessage(message.msg)) {\r\n      message.msg = formatMessage(message.msg);\r\n      // Send message to server, or user\r\n      if (activeView === 'servers' && message.type === 'channelMessage') {\r\n        dispatch(sendMessage(message));\r\n      } else if (activeView === 'home' && message.type === 'privateMessage') {\r\n        dispatch(sendPrivateMessage(message));\r\n      }\r\n      setChatMessage('');\r\n    } else {\r\n      // throw some error\r\n    }\r\n  }\r\n\r\n  // Handles enter event to submit message\r\n  function handleKeyPress(e: any) {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      if (activeView === 'servers')\r\n        handleSubmit({\r\n          server: activeServer,\r\n          channel: activeChannel,\r\n          from: userName,\r\n          msg: chatMessage,\r\n          type: 'channelMessage'\r\n        });\r\n      else if (activeView === 'home')\r\n        handleSubmit({ from: userName, to: activePMUser, msg: chatMessage, type: 'privateMessage' });\r\n    }\r\n  }\r\n\r\n  // Handles changes in message box (catches enter to not send new lines. (Must send SHIFT+ENTER))\r\n  function handleOnChange(e: React.ChangeEvent<HTMLTextAreaElement>) {\r\n    if (e.target.value !== '\\n') setChatMessage(e.target.value);\r\n  }\r\n\r\n  // When click emoji, close the menu\r\n  function handleEmojiClick(e: any) {\r\n    setChatMessage(chatMessage + e.native);\r\n    setEmojiMenuVisible(false);\r\n  }\r\n\r\n  // Closes emoji menu when clicked outside the div\r\n  window.onclick = (e: any) => {\r\n    if (String(e.target.className).includes('send-message-emoji-menu')) setEmojiMenuVisible(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"send-message-border\" />\r\n      <div className=\"send-message-container\">\r\n        <TextareaAutosize\r\n          aria-label=\"empty textarea\"\r\n          placeholder={`Message  #${placeholderTitle}`}\r\n          className=\"message-text-area\"\r\n          value={chatMessage}\r\n          onChange={e => handleOnChange(e)}\r\n          onKeyPress={e => handleKeyPress(e)}\r\n        />\r\n        <SmileyFace className=\"send-message-emoji-button\" onClick={() => setEmojiMenuVisible(!emojiMenuVisible)} />\r\n      </div>\r\n      <div className={emojiMenuVisible ? 'send-message-emoji-menu show' : 'send-message-emoji-menu hide'}>\r\n        <div className=\"emoji-wrapper\">\r\n          <Picker set=\"emojione\" onSelect={e => handleEmojiClick(e)} />\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Card, Typography, makeStyles, TextField } from '@material-ui/core';\r\nimport { sendPrivateMessage, changeView, changePMUser } from '../../actions';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  card: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n    width: 250,\r\n    background: '#2f3136'\r\n  },\r\n  cardHeader: {\r\n    background: '#202225',\r\n    width: '100%'\r\n  },\r\n  image: {\r\n    marginTop: '1em',\r\n    marginBottom: '8px'\r\n  },\r\n  cardInput: {\r\n    padding: '1em'\r\n  },\r\n  input: {\r\n    height: '38px'\r\n  }\r\n}));\r\n\r\nexport default function UserInfo(props) {\r\n\r\n  // Get state from redux store\r\n  const user = useSelector(state => state.user);\r\n  const dispatch = useDispatch();\r\n\r\n  const { userName, setUserInfoVisible } = props;\r\n  const classes = useStyle();\r\n  const [messageText, setMessageText] = useState('');\r\n\r\n  // Handles keypress and calls the callback method\r\n  const handleKeyPress = (e, callbackMethod) => {\r\n    if (e.key === \"Enter\") {\r\n      callbackMethod();\r\n    }\r\n  }\r\n\r\n  // Calls API to send a Private message\r\n  const handleSendPrivateMessage = (messageText, userName) => {\r\n    const msg = { \"from\": user.userName, \"msg\": messageText, \"to\": userName };\r\n    dispatch(sendPrivateMessage(msg));\r\n    dispatch(changeView('home'));\r\n    dispatch(changePMUser(msg.to.toLowerCase()));\r\n    setUserInfoVisible(false);\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.card}>\r\n      <div className={classes.cardHeader}>\r\n        <img src={process.env.PUBLIC_URL + \"/user.png\"} alt=\"user-icon\" className={classes.image} />\r\n        <Typography variant='body1' gutterBottom>{userName}</Typography>\r\n      </div>\r\n      <div className={classes.cardInput}>\r\n        <TextField\r\n          id=\"user-private-message\"\r\n          label={`Private message`}\r\n          placeholder={`Message @ ${userName}`}\r\n          value={messageText}\r\n          onChange={(e) => setMessageText(e.target.value)}\r\n          onKeyPress={(e) => handleKeyPress(e, () => handleSendPrivateMessage(messageText, userName))}\r\n          variant=\"outlined\"\r\n          InputProps={{\r\n            className: classes.input\r\n          }}\r\n          InputLabelProps={{\r\n            shrink: true\r\n          }}\r\n        />\r\n      </div>\r\n    </Card>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { List, ListItem, ListItemAvatar, Avatar, ListItemText, Popover } from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport UserInfo from '../UserInfo/UserInfo';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function ActiveUserList() {\r\n  // Get user list from redux store\r\n  const { activeUserList } = useSelector((state: StoreState) => state.chat);\r\n\r\n  // Local state\r\n  const [userInfoVisible, setUserInfoVisible] = useState(false);\r\n  const [userName, setUserName] = useState('');\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  // Handles clicks for setting anchor to User Info (To private message)\r\n  const handleUserClick = (e: any, userName: string) => {\r\n    setUserName(userName);\r\n    setUserInfoVisible(true);\r\n    setAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  // Closes popup of User Info\r\n  const handlePopoverClose = () => {\r\n    setUserInfoVisible(false);\r\n    setAnchorEl(null);\r\n  };\r\n  return (\r\n    <div className=\"user-list-container\">\r\n      <List className=\"users-list\">\r\n        <ListItem className=\"users-list-title\"> Active Users </ListItem>\r\n        {activeUserList.map(user => {\r\n          return (\r\n            <ListItem button className=\"user-list-item\" onClick={e => handleUserClick(e, user.user_name)}>\r\n              <ListItemAvatar className=\"message-user-icon\">\r\n                <Avatar>\r\n                  <img src={process.env.PUBLIC_URL + '/user.png'} alt=\"user icon\" height=\"48\" />\r\n                  <div className=\"user-list-online\"></div>\r\n                </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText>{user.user_name}</ListItemText>\r\n            </ListItem>\r\n          );\r\n        })}\r\n      </List>\r\n\r\n      <Popover\r\n        id=\"user-info\"\r\n        open={userInfoVisible}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'right'\r\n        }}\r\n      >\r\n        <UserInfo userName={userName} setUserInfoVisible={setUserInfoVisible} />\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { SwipeableDrawer, SvgIcon, Link, Tooltip } from '@material-ui/core';\r\n\r\nimport Sidebar from '../Sidebar/Sidebar';\r\nimport ActiveUserList from '../ActiveUserList/ActiveUserList';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function Header() {\r\n  // Get State from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const { activeChannel, activePMUser, activeView } = chatStore;\r\n\r\n  // Local state\r\n  const [sideBarDrawerVisible, setSideBarDrawerVisible] = useState(false);\r\n  const [userListDrawerVisible, setUserListDrawerVisible] = useState(false);\r\n  const [title, setTitle] = useState('');\r\n\r\n  // On active view change change title\r\n  useEffect(() => {\r\n    if (activeView === 'servers') {\r\n      setTitle(activeChannel.split('-')[0].toLowerCase());\r\n    } else if (activeView === 'home') {\r\n      setTitle(activePMUser);\r\n    }\r\n  }, [activeView, activePMUser, activeChannel]);\r\n\r\n  return (\r\n    <AppBar position=\"static\" className=\"appbar\">\r\n      <Toolbar className=\"navbar\">\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          className=\"menu-burger-button\"\r\n          onClick={() => setSideBarDrawerVisible(true)}\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <SwipeableDrawer\r\n          anchor=\"left\"\r\n          open={sideBarDrawerVisible}\r\n          onClose={() => setSideBarDrawerVisible(false)}\r\n          onOpen={() => setSideBarDrawerVisible(true)}\r\n        >\r\n          <Sidebar setDrawerVisible={setSideBarDrawerVisible} />\r\n        </SwipeableDrawer>\r\n        <SwipeableDrawer\r\n          anchor=\"right\"\r\n          open={userListDrawerVisible}\r\n          onClose={() => setUserListDrawerVisible(false)}\r\n          onOpen={() => setUserListDrawerVisible(true)}\r\n        >\r\n          <ActiveUserList />\r\n        </SwipeableDrawer>\r\n        <Typography variant=\"h6\">{title} </Typography>\r\n        <Link href=\"https://github.com/ericellb/React-Discord-Clone\" target=\"_blank\" style={{ color: 'white' }}>\r\n          <Tooltip title=\"Check me out on Github!\" className=\"tooltip\">\r\n            <IconButton>\r\n              <SvgIcon>\r\n                <path d=\"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z\" />\r\n              </SvgIcon>\r\n            </IconButton>\r\n          </Tooltip>\r\n        </Link>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  Avatar,\r\n  ListItemText,\r\n  Fade,\r\n  Popover,\r\n  CircularProgress\r\n} from '@material-ui/core';\r\nimport moment from 'moment';\r\n//import Code from 'react-code-prettify';\r\nimport UserInfo from '../UserInfo/UserInfo';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface MessageList {\r\n  from: string;\r\n  to?: string;\r\n  msg: string;\r\n  date: Date;\r\n}\r\n\r\ndeclare var PR: any;\r\n\r\nexport default function Messages() {\r\n  // Get States from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const { activeServer, activeChannel, activeView, activePMUser } = chatStore;\r\n\r\n  // Local states\r\n  const [userInfoVisible, setUserInfoVisible] = useState(false);\r\n  const [messageIndex, setMessageIndex] = useState(12);\r\n  const [loadMessages, setLoadMessages] = useState(false);\r\n  const [userName, setUserName] = useState('');\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  // ref to message container (for keeping scroll to bottom of chat)\r\n  let messageContainerBottomRef = document.getElementById('messagesContainerBottom');\r\n  let messageContainerRef = document.getElementById('messagesContainer');\r\n\r\n  // Get message list from channel or from specific user\r\n  let messages: MessageList[] = [];\r\n  let messagesLength = 0;\r\n  if (activeView === 'servers') {\r\n    messages = chatStore.servers[activeServer]['channels'][activeChannel];\r\n    messagesLength = messages.length;\r\n  } else {\r\n    messages = chatStore.privateMessages[activePMUser];\r\n    // If no messages need to make empty array\r\n    if (messages === undefined) {\r\n      messages = [];\r\n    }\r\n    messagesLength = messages.length;\r\n  }\r\n\r\n  // Scroll to bottom of container if were not loading new messages\r\n  useEffect(() => {\r\n    if (messageContainerBottomRef && messageContainerRef) {\r\n      if (loadMessages) {\r\n        messageContainerRef.scroll(0, 60);\r\n      } else {\r\n        messageContainerBottomRef.scrollIntoView({ block: 'end', behavior: 'smooth' });\r\n      }\r\n    }\r\n  }, [loadMessages, messages, messageContainerRef, messageContainerBottomRef]);\r\n\r\n  // Checks is message is a code block\r\n  const isTextCodeBlock = (message: string) => {\r\n    if (message.startsWith('```') && message.endsWith('```')) return true;\r\n    else return false;\r\n  };\r\n\r\n  // Handles to load more messages when scroll at top\r\n  const handleScrollTop = (e: any) => {\r\n    const element = e.target;\r\n    if (element.scrollTop > 60) {\r\n      setLoadMessages(false);\r\n    }\r\n    if (element.scrollTop === 0) {\r\n      if (messagesLength > messageIndex) {\r\n        setTimeout(() => {\r\n          setLoadMessages(true);\r\n          if (messageIndex + 12 > messagesLength) {\r\n            setMessageIndex(messagesLength);\r\n          } else {\r\n            setMessageIndex(messageIndex + 12);\r\n          }\r\n        }, 400);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Formats the code block\r\n  const formatCode = (message: string) => {\r\n    return message.split('```')[1];\r\n  };\r\n\r\n  // Handles clicks for setting anchor to User Info (To private message)\r\n  const handleUserClick = (e: any, userName: string) => {\r\n    setUserName(userName);\r\n    setUserInfoVisible(true);\r\n    setAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  // Closes popup of User Info\r\n  const handlePopoverClose = () => {\r\n    setUserInfoVisible(false);\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  // Load pretty print on every render change\r\n  useEffect(() => {\r\n    PR.prettyPrint();\r\n  });\r\n\r\n  return (\r\n    <div\r\n      id=\"messagesContainer\"\r\n      className=\"messages-container\"\r\n      onScroll={e => handleScrollTop(e)}\r\n      ref={element => (messageContainerRef = element)}\r\n    >\r\n      {messagesLength >= messageIndex ? (\r\n        <div className=\"progress-container\">\r\n          <CircularProgress color=\"primary\" />\r\n        </div>\r\n      ) : null}\r\n      <List>\r\n        {messages !== null\r\n          ? messages.slice(messagesLength - messageIndex, messagesLength).map((message, i) => {\r\n              // Filter for null messages (dummy message on backend should fix...)\r\n              return (\r\n                <Fade in={true} timeout={500}>\r\n                  <ListItem className=\"message\" key={i}>\r\n                    <ListItemAvatar className=\"message-user-icon\">\r\n                      <Avatar>\r\n                        <img\r\n                          onClick={e => handleUserClick(e, message.from)}\r\n                          src={process.env.PUBLIC_URL + '/user.png'}\r\n                          alt=\"user icon\"\r\n                          height=\"48\"\r\n                        />\r\n                      </Avatar>\r\n                    </ListItemAvatar>\r\n                    {isTextCodeBlock(message.msg) ? (\r\n                      <ListItemText\r\n                        primary={\r\n                          <div className=\"message-user\" onClick={e => handleUserClick(e, message.from)}>\r\n                            {message.from.toLowerCase()}\r\n                            <div className=\"message-date\">{` - ${moment(message.date).format('LLL')}`}</div>\r\n                          </div>\r\n                        }\r\n                        secondary={\r\n                          <pre className=\"prettyprint\">\r\n                            <div dangerouslySetInnerHTML={{ __html: formatCode(message.msg) }}></div>\r\n                          </pre>\r\n                        }\r\n                        className=\"message-text\"\r\n                      />\r\n                    ) : (\r\n                      <ListItemText\r\n                        primary={\r\n                          <div className=\"message-user\" onClick={e => handleUserClick(e, message.from)}>\r\n                            {message.from.toLowerCase()}\r\n                            <div className=\"message-date\">{` - ${moment(message.date).format('LLL')}`}</div>\r\n                          </div>\r\n                        }\r\n                        secondary={message.msg}\r\n                        className=\"message-text\"\r\n                      />\r\n                    )}\r\n                  </ListItem>\r\n                </Fade>\r\n              );\r\n            })\r\n          : null}\r\n      </List>\r\n      <div ref={element => (messageContainerBottomRef = element)} id=\"messagesContainerBottom\"></div>\r\n      <Popover\r\n        id=\"user-info\"\r\n        open={userInfoVisible}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'right'\r\n        }}\r\n      >\r\n        <UserInfo userName={userName} setUserInfoVisible={setUserInfoVisible} />\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { loadUserData, updateActiveState, updateActiveUserList } from '../../actions';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport createHashHistory from '../../history';\r\nimport Sidebar from '../Sidebar/Sidebar';\r\nimport SendMessage from '../SendMessage/SendMessage';\r\nimport Header from '../Header/Header';\r\nimport Messages from '../Messages/Messages';\r\nimport ActiveUserList from '../ActiveUserList/ActiveUserList';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function Dashboard() {\r\n  // Get State from Redux Store\r\n  const user = useSelector((state: StoreState) => state.user);\r\n  const { activeServer } = useSelector((state: StoreState) => state.chat);\r\n  const dispatch = useDispatch();\r\n\r\n  // Ping server every 5 minutes to update our active status\r\n  // Also fetches new list of active users in activeServer\r\n  const updateActiveStatus = () => {\r\n    dispatch(updateActiveState());\r\n    dispatch(updateActiveUserList(activeServer.split('-')[1]));\r\n    setTimeout(updateActiveStatus, 5 * 60000);\r\n  };\r\n\r\n  // Listens for changes on isSignedIn\r\n  // Gets initial user data upon change\r\n  useEffect(() => {\r\n    if (!user.isSignedIn) {\r\n      createHashHistory.push('/');\r\n    } else {\r\n      dispatch(loadUserData(user.userId));\r\n      updateActiveStatus();\r\n    } // eslint-disable-next-line\r\n  }, [dispatch, user.isSignedIn, user.userId]);\r\n\r\n  // Watches viewport height (fix for mobile address bar size)\r\n  window.addEventListener('resize', () => {\r\n    let vh = window.innerHeight * 0.01;\r\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\r\n  });\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <div className=\"grid-container\">\r\n        <div className=\"sidebar-grid\">\r\n          <Sidebar />\r\n        </div>\r\n\r\n        <div className=\"messages-grid\">\r\n          <Header />\r\n          <Messages />\r\n        </div>\r\n\r\n        <div className=\"user-list-grid\">\r\n          <ActiveUserList />\r\n        </div>\r\n\r\n        <div className=\"send-messages-grid\">\r\n          <SendMessage />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, KeyboardEvent } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport {\r\n  Paper,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  CardActionArea,\r\n  CardMedia,\r\n  Slide,\r\n  TextField,\r\n  Grid,\r\n  IconButton,\r\n  Checkbox\r\n} from '@material-ui/core';\r\nimport { GroupAdd, Person, ArrowBack } from '@material-ui/icons';\r\nimport axios from '../Api/api';\r\n\r\nimport createHashHistory from '../../history';\r\nimport { signIn } from '../../actions';\r\n\r\nexport default function Auth() {\r\n  // Dispatch\r\n  const dispatch = useDispatch();\r\n\r\n  // Local state to control Modal Windows + Data fields\r\n  const [mainVisible, setMainVisible] = useState(true);\r\n  const [mainDirection, setMainDirection]: any = useState('left');\r\n  const [createVisible, setCreateVisible] = useState(false);\r\n  const [createDirection, setCreateDirection]: any = useState('left');\r\n  const [loginVisible, setLoginVisible] = useState(false);\r\n  const [loginDirection, setLoginDirection]: any = useState('left');\r\n  const [userName, setUserName] = useState('');\r\n  const [userNameError, setUserNameError] = useState(false);\r\n  const [userNameErrorMsg, setUserNameErrorMsg] = useState('');\r\n  const [userPass, setUserPass] = useState('');\r\n  const [userPassError, setUserPassError] = useState(false);\r\n  const [userPassErrorMsg, setUserPassErrorMsg] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n\r\n  // Shows the main modal (sets transition directions and views to visible / non visible)\r\n  const showMain = () => {\r\n    setMainDirection('left');\r\n    setMainVisible(true);\r\n    setCreateVisible(false);\r\n    setCreateDirection('right');\r\n    setLoginVisible(false);\r\n    setLoginDirection('right');\r\n  };\r\n\r\n  // Handles showing the Join Server window\r\n  const showCreateAccount = () => {\r\n    setCreateDirection('left');\r\n    setMainDirection('right');\r\n    setCreateVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Handles showing the Create Server window\r\n  const showLoginAccount = () => {\r\n    setLoginDirection('left');\r\n    setMainDirection('right');\r\n    setLoginVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Handles and checks keypress and calls the callback method\r\n  const handleKeyPress = (e: KeyboardEvent, callBack: Function) => {\r\n    if (e.key === 'Enter') {\r\n      callBack();\r\n    }\r\n  };\r\n\r\n  // Validates input and calls callback function\r\n  const handleOnSubmit = (userName: string, userPass: string, callBack: Function) => {\r\n    let error = false;\r\n    if (userName === '') {\r\n      setUserNameError(true);\r\n      setUserNameErrorMsg('Name cannot be empty');\r\n      error = true;\r\n    } else setUserNameError(false);\r\n    if (userPass.length < 6) {\r\n      setUserPassError(true);\r\n      setUserPassErrorMsg('Passwords must be 6 characters');\r\n      error = true;\r\n    } else setUserPassError(false);\r\n\r\n    if (!error) {\r\n      callBack();\r\n    }\r\n  };\r\n\r\n  // Handles creation of account and calls sign in action\r\n  const handleCreateAccount = async (userName: string, userPass: string) => {\r\n    try {\r\n      // encode username and userpass - it may have # $ & + ,  / : ; = ? @ [ ]\r\n      userName = encodeURIComponent(userName);\r\n      userPass = encodeURIComponent(userPass);\r\n\r\n      const response = await axios.post(`/user/create?userName=${userName}&userPass=${userPass}`);\r\n      if (rememberMe) {\r\n        localStorage.setItem('user', JSON.stringify(response.data));\r\n      }\r\n      dispatch(signIn(response.data));\r\n      createHashHistory.push('/dashboard');\r\n    } catch (err) {\r\n      const errorData = err.response.data;\r\n      if (errorData) {\r\n        setUserNameError(true);\r\n        setUserNameErrorMsg(errorData);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Handles login of account and calls sign in action\r\n  const handleLoginAccount = async (userName: string, userPass: string) => {\r\n    // encode username and userpass - it may have # $ & + ,  / : ; = ? @ [ ]\r\n    userName = encodeURIComponent(userName);\r\n    userPass = encodeURIComponent(userPass);\r\n\r\n    try {\r\n      const response = await axios.get(`/user/login?userName=${userName}&userPass=${userPass}`);\r\n      if (rememberMe) {\r\n        localStorage.setItem('user', JSON.stringify(response.data));\r\n      }\r\n      dispatch(signIn(response.data));\r\n      createHashHistory.push('/dashboard');\r\n    } catch (err) {\r\n      const errorData = err.response.data;\r\n      if (errorData) {\r\n        setUserNameError(true);\r\n        setUserNameErrorMsg(errorData);\r\n        setUserPassError(true);\r\n        setUserPassErrorMsg(errorData);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Renders options to Create or Login to account\r\n  const renderMain = () => {\r\n    return (\r\n      <Slide direction={mainDirection} in={mainVisible} timeout={350} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item sm={12} xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create an account, or sign in!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showCreateAccount()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"primary\" gutterBottom>\r\n                    Create\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Create a new account.\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <GroupAdd className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"primary\">\r\n                    Create\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showLoginAccount()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"secondary\" gutterBottom>\r\n                    Login\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Sign in to an existing account.\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <Person className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"secondary\">\r\n                    Login{' '}\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the form to create an account\r\n  const renderCreateAccount = () => {\r\n    return (\r\n      <Slide direction={createDirection} in={createVisible} timeout={350} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={1} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <IconButton onClick={showMain}>\r\n              <ArrowBack />\r\n            </IconButton>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create Account\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              value={userName}\r\n              error={userNameError}\r\n              helperText={userNameErrorMsg}\r\n              onChange={e => setUserName(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleCreateAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={userPass}\r\n              error={userPassError}\r\n              helperText={userPassErrorMsg}\r\n              onChange={e => setUserPass(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleCreateAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <div>\r\n              Remember Me <Checkbox value={rememberMe} onChange={e => setRememberMe(e.target.checked)} />\r\n            </div>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleOnSubmit(userName, userPass, () => handleCreateAccount(userName, userPass))}\r\n            >\r\n              Create\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the form to login to account\r\n  const renderLoginAccount = () => {\r\n    return (\r\n      <Slide direction={loginDirection} in={loginVisible} timeout={350} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <IconButton onClick={showMain}>\r\n              <ArrowBack />\r\n            </IconButton>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Login Account\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              value={userName}\r\n              error={userNameError}\r\n              helperText={userNameErrorMsg}\r\n              onChange={e => setUserName(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleLoginAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={userPass}\r\n              error={userPassError}\r\n              helperText={userPassErrorMsg}\r\n              onChange={e => setUserPass(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleLoginAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <div>\r\n              Remember Me <Checkbox value={rememberMe} onChange={e => setRememberMe(e.target.checked)} />\r\n            </div>\r\n            <Button\r\n              className=\"modal-login-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleOnSubmit(userName, userPass, () => handleLoginAccount(userName, userPass))}\r\n            >\r\n              Login\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-wrapper\">\r\n      <Paper className=\"container-prompt\">\r\n        {renderMain()}\r\n        {renderCreateAccount()}\r\n        {renderLoginAccount()}\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\n\r\nimport './App.css';\r\nimport Dashboard from '../Dashboard/Dashboard';\r\nimport Auth from '../Auth/Auth';\r\nimport { signIn } from '../../actions';\r\nimport createHashHistory from '../../history';\r\n\r\nfunction App() {\r\n  // Dispatch\r\n  const dispatch = useDispatch();\r\n\r\n  // Check local storage if have login info\r\n  // Dispatch sign in action with our userId and redirect to dashboard\r\n  const checkLocalStorageAuth = () => {\r\n    let user = JSON.parse(localStorage.getItem('user')!);\r\n    if (user) {\r\n      dispatch(signIn(user));\r\n      createHashHistory.push('/dashboard');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <HashRouter>\r\n        {checkLocalStorageAuth()}\r\n        <Route path=\"/dashboard\" exact component={Dashboard} />\r\n        <Route path=\"/\" exact component={Auth} />\r\n      </HashRouter>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiTooltip: {\r\n      tooltip: {\r\n        fontSize: '14px',\r\n        backgroundColor: 'black'\r\n      }\r\n    },\r\n    MuiSnackbarContent: {\r\n      root: {\r\n        backgroundColor: '#202225',\r\n        color: 'white'\r\n      }\r\n    },\r\n    MuiAppBar: {\r\n      colorPrimary: {\r\n        backgroundColor: '#36393E',\r\n        position: 'absolute'\r\n      }\r\n    }\r\n  },\r\n  palette: {\r\n    type: 'dark',\r\n    primary: {\r\n      main: '#7289da'\r\n    },\r\n    secondary: {\r\n      main: '#3ca374'\r\n    }\r\n  },\r\n  typography: {\r\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n    fontSize: 14,\r\n    fontWeightLight: 400,\r\n    fontWeightRegular: 500,\r\n    fontWeightMedium: 600\r\n  }\r\n});\r\n","import { ACTION, ChatActionTypes } from '../actions/types';\r\n\r\nexport interface ChatStore {\r\n  servers: {\r\n    [serverName: string]: {\r\n      channels: {\r\n        [channelName: string]: { from: string; msg: string; date: Date }[];\r\n      };\r\n    };\r\n  };\r\n  privateMessages: {\r\n    [userPM: string]: { from: string; to: string; msg: string; date: Date }[];\r\n  };\r\n  activeServer: string;\r\n  activeChannel: string;\r\n  activeUserList: { user_name: string }[];\r\n  activeView: string;\r\n  activePMUser: string;\r\n}\r\n\r\nconst initialState = {\r\n  servers: {\r\n    'Default-FANfDprXmt': {\r\n      channels: {\r\n        'general-0m5vBsRnfd': []\r\n      }\r\n    }\r\n  },\r\n  privateMessages: {},\r\n  activeServer: 'Default-FANfDprXmt',\r\n  activeChannel: 'general-0m5vBsRnfd',\r\n  activeUserList: [],\r\n  activeView: 'servers',\r\n  activePMUser: 'none'\r\n};\r\n\r\nexport const chatReducer = (state: ChatStore = initialState, action: ChatActionTypes): ChatStore => {\r\n  switch (action.type) {\r\n    case ACTION.RECEIVE_SOCKET_MESSAGE:\r\n      let { server, channel, from, msg, date } = action.payload;\r\n      return {\r\n        ...state,\r\n        servers: {\r\n          ...state.servers,\r\n          [server]: {\r\n            ...state.servers[server],\r\n            channels: {\r\n              ...state.servers[server].channels,\r\n              [channel]: [...state.servers[server]['channels'][channel], { from: from, msg: msg, date: date }]\r\n            }\r\n          }\r\n        }\r\n      };\r\n    case ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE:\r\n      if (state.privateMessages[action.payload.user]) {\r\n        return {\r\n          ...state,\r\n          privateMessages: {\r\n            ...state.privateMessages,\r\n            [action.payload.user]: [\r\n              ...state.privateMessages[action.payload.user],\r\n              { from: action.payload.from, to: action.payload.to, msg: action.payload.msg, date: action.payload.date }\r\n            ]\r\n          }\r\n        };\r\n      } else\r\n        return {\r\n          ...state,\r\n          privateMessages: {\r\n            ...state.privateMessages,\r\n            [action.payload.user]: [\r\n              { from: action.payload.from, to: action.payload.to, msg: action.payload.msg, date: action.payload.date }\r\n            ]\r\n          }\r\n        };\r\n    case ACTION.ADD_CHANNEL:\r\n      return {\r\n        ...state,\r\n        servers: {\r\n          ...state.servers,\r\n          [action.payload.server]: {\r\n            ...state.servers[action.payload.server],\r\n            channels: {\r\n              ...state.servers[action.payload.server].channels,\r\n              [action.payload.channel]: []\r\n            }\r\n          }\r\n        }\r\n      };\r\n    case ACTION.ADD_SERVER:\r\n      return {\r\n        ...state,\r\n        servers: {\r\n          ...state.servers,\r\n          [action.payload.server]: {\r\n            channels: {\r\n              [action.payload.channel]: []\r\n            }\r\n          }\r\n        }\r\n      };\r\n    case ACTION.GET_INITIAL_DATA:\r\n      return {\r\n        ...state,\r\n        servers: action.payload.servers,\r\n        privateMessages: action.payload.privateMessages,\r\n        activeServer: Object.keys(action.payload.servers)[0],\r\n        activeChannel: Object.keys(state.servers[Object.keys(action.payload.servers)[0]].channels)[0]\r\n      };\r\n    case ACTION.CHANGE_SERVER:\r\n      return {\r\n        ...state,\r\n        activeServer: action.payload,\r\n        activeChannel: Object.keys(state.servers[action.payload].channels)[0]\r\n      };\r\n    case ACTION.CHANGE_CHANNEL:\r\n      return { ...state, activeChannel: action.payload };\r\n    case ACTION.CHANGE_VIEW:\r\n      return { ...state, activeView: action.payload, activePMUser: Object.keys(state.privateMessages)[0] };\r\n    case ACTION.CHANGE_PM_USER:\r\n      return { ...state, activePMUser: action.payload };\r\n    case ACTION.UPDATE_ACTIVE_USERS:\r\n      return { ...state, activeUserList: action.payload };\r\n    default:\r\n      return { ...state };\r\n  }\r\n};\r\n","import { ACTION, UserActionTypes } from '../actions/types';\r\n\r\nexport interface UserStore {\r\n  isSignedIn: boolean;\r\n  isAdmin: boolean;\r\n  userId: string;\r\n  userName: string;\r\n}\r\n\r\nconst initialState = {\r\n  isSignedIn: false,\r\n  isAdmin: false,\r\n  userId: '',\r\n  userName: ''\r\n};\r\n\r\nexport const userReducer = (state: UserStore = initialState, action: UserActionTypes): UserStore => {\r\n  switch (action.type) {\r\n    case ACTION.SIGN_IN:\r\n      return { ...state, isSignedIn: true, userId: action.payload.userId, userName: action.payload.userName };\r\n    case ACTION.SIGN_OUT:\r\n      return { ...state, isSignedIn: false, userId: '', userName: '', isAdmin: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { chatReducer, ChatStore } from './chatReducer';\r\nimport { userReducer, UserStore } from './userReducer';\r\nimport { combineReducers } from 'redux';\r\n\r\nexport interface StoreState {\r\n  chat: ChatStore;\r\n  user: UserStore;\r\n}\r\n\r\nexport default combineReducers<StoreState>({\r\n  chat: chatReducer,\r\n  user: userReducer\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App/App';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducers from './reducers';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { socketMiddleware } from './middleware/socketMiddleware';\r\n\r\nconst baseUrl = process.env.NODE_ENV === 'development' ? 'http://localhost:3001' : process.env.REACT_APP_API_URL;\r\n\r\nconst store = createStore(reducers, composeWithDevTools(applyMiddleware(thunk, socketMiddleware(baseUrl || ''))));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import io from 'socket.io-client';\r\n\r\nimport { ACTION, SocketActions } from '../actions/types';\r\nimport { Dispatch } from 'react';\r\nimport { AnyAction, MiddlewareAPI } from 'redux';\r\n\r\nexport const socketMiddleware = (baseUrl: string) => {\r\n  return (storeAPI: MiddlewareAPI) => {\r\n    let socket = io(baseUrl);\r\n    // eslint-disable-next-line\r\n    let listener: SocketIOClient.Emitter;\r\n\r\n    // Check actions and emit from socket if needed\r\n    return (next: Dispatch<AnyAction>) => (action: SocketActions) => {\r\n      // Send message over socket\r\n      if (action.type === ACTION.SEND_SOCKET_MESSAGE) {\r\n        socket.emit('simple-chat-message', action.payload);\r\n        return;\r\n      }\r\n\r\n      // Send private message over socket\r\n      if (action.type === ACTION.SEND_SOCKET_PRIVATE_MESSAGE) {\r\n        socket.emit('simple-chat-private-message', action.payload);\r\n        return;\r\n      }\r\n\r\n      // Pull sign in action and login to send socket server our userId (identify individual socket connectins)\r\n      if (action.type === ACTION.SIGN_IN) {\r\n        socket.emit('simple-chat-sign-in', action.payload.userId);\r\n        listener = setupSocketListener(socket, storeAPI);\r\n      }\r\n\r\n      // Pull server list off initial data load\r\n      // Use to \"join\" our server \"rooms\"\r\n      if (action.type === ACTION.GET_INITIAL_DATA) {\r\n        // Get list of server Ids (used for \"room\" names on socket server)\r\n        let servers = Object.keys(action.payload.servers);\r\n        let serverIds: string[] = [];\r\n        servers.forEach((server, i) => {\r\n          serverIds[i] = server.split('-')[1];\r\n        });\r\n\r\n        // Subscribe to each server (Creates a room on socket io)\r\n        serverIds.forEach(serverId => {\r\n          socket.emit('subscribe', serverId);\r\n        });\r\n      }\r\n\r\n      // If user creates a server we need to join that room\r\n      if (action.type === ACTION.ADD_SERVER) {\r\n        let serverId = action.payload.server.split('-')[1];\r\n        socket.emit('subscribe', serverId);\r\n      }\r\n\r\n      // Updates our active state on server\r\n      if (action.type === ACTION.UPDATE_ACTIVE_STATE) {\r\n        socket.emit('update-active');\r\n      }\r\n\r\n      return next(action);\r\n    };\r\n  };\r\n};\r\n\r\n// Listens on socket with our userId\r\n// Listens to socket server for specific events for messages / private messages\r\n// TODO listen for listen for types of Server + payload of message\r\nfunction setupSocketListener(socket: SocketIOClient.Socket, storeAPI: MiddlewareAPI): SocketIOClient.Emitter {\r\n  return socket.on('update', (action: any) => {\r\n    // Check for action type\r\n    if (action.type === 'message') {\r\n      storeAPI.dispatch({\r\n        type: ACTION.RECEIVE_SOCKET_MESSAGE,\r\n        payload: action.payload\r\n      });\r\n    } else if (action.type === 'private-message') {\r\n      storeAPI.dispatch({\r\n        type: ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE,\r\n        payload: action.payload\r\n      });\r\n    }\r\n  });\r\n}\r\n"],"sourceRoot":""}