{"version":3,"sources":["actions/types.ts","components/Api/api.ts","actions/index.ts","history.ts","components/SnackBar/SnackBarContent.jsx","components/Sidebar/PrivateMessageUserList.tsx","components/Sidebar/ChannelList.tsx","components/Sidebar/ServerList.tsx","components/ActionsModal/ActionsModal.tsx","components/Sidebar/Sidebar.tsx","components/SendMessage/SendMessage.tsx","components/UserInfo/UserInfo.jsx","components/ActiveUserList/ActiveUserList.tsx","components/Header/Header.tsx","components/Messages/Messages.tsx","components/Dashboard/Dashboard.tsx","components/Auth/Auth.tsx","components/App/App.tsx","reducers/chatReducer.ts","reducers/userReducer.ts","reducers/index.ts","index.tsx","middleware/socketMiddleware.ts"],"names":["ACTION","axios","create","baseURL","process","sendMessage","message","type","SEND_SOCKET_MESSAGE","payload","sendPrivateMessage","SEND_SOCKET_PRIVATE_MESSAGE","sendJoinVoice","data","SEND_SOCKET_JOIN_VOICE","sendRtcSignal","SEND_SOCKET_RTC_SIGNAL","sendLeaveVoice","SEND_SOCKET_LEAVE_VOICE","clearVoiceConnection","CLEAR_VOICE_CONNECTION","addChannel","channel","ADD_CHANNEL","addServer","server","ADD_SERVER","updateActiveUserList","serverId","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","response","wrap","_context","prev","next","get","concat","sent","UPDATE_ACTIVE_USERS","stop","_x","apply","this","arguments","updateActiveState","UPDATE_ACTIVE_STATE","changeServer","split","CHANGE_SERVER","changeChannel","CHANGE_CHANNEL","changeView","view","CHANGE_VIEW","changePMUser","user","CHANGE_PM_USER","loadUserData","userId","_ref2","_callee2","url","res","_context2","keys","servers","GET_INITIAL_DATA","_x2","signIn","SIGN_IN","signOut","SIGN_OUT","createHashHistory","SnackBarContent","props","content","visible","setVisible","react_default","createElement","Snackbar","open","anchorOrigin","vertical","horizontal","onEntered","setTimeout","PrivateMessageUserList","privateMessages","useSelector","state","chat","userList","useDispatch","className","List","ListItem","map","userItem","i","Slide","direction","in","timeout","key","button","onClick","Avatar","src","alt","height","Typography","variant","ListItemAvatar","Person","ListItemText","primary","userName","Button","localStorage","clear","localStream","prevActiveChannel","connections","peerConnectionConfig","iceServers","urls","ChannelList","chatStore","channels","activeServer","activeChannel","voiceClients","voiceJoinUserId","rtcSignalData","voiceLeaveUserId","setDrawerVisible","setModalVisible","setModalType","handleSnackMessage","_useState","useState","_useState2","slicedToArray","serverAnchorEl","setServerAnchorEl","_useState3","_useState4","channelAnchorEl","setChannelAnchorEl","_useState5","_useState6","isAdmin","setIsAdmin","useEffect","_getAdmin","getAdmin","handleModalShow","modalType","handleSettingsClick","e","currentTarget","handleClose","navigator","mediaDevices","getUserMedia","isSignedIn","audio","then","stream","channelId","attachVoiceChannel","disconnectPreviousVoice","onUserJoin","gotMessageFromServer","onUserLeave","audios","document","id","div","innerText","srcObject","autoplay","controls","muted","appendChild","audiosParent","getElementById","parentNode","insertBefore","nextSibling","newUserId","clients","forEach","RTCPeerConnection","onicecandidate","event","candidate","ice","onaddstream","gotRemoteStream","addStream","createOffer","description","setLocalDescription","sdp","localDescription","catch","console","log","close","parentDiv","querySelector","parentElement","removeChild","fromId","signal","setRemoteDescription","RTCSessionDescription","createAnswer","addIceCandidate","RTCIceCandidate","userSocketId","userSocketName","setAttribute","outerHTML","connection","Fragment","Tooltip","title","placement","IconButton","MoreVert","handleChannelChange","toLowerCase","Settings","Menu","anchorEl","Boolean","onClose","MenuItem","text","clipboard","writeText","callBack","length","ServerList","handleChangeView","undefined","Home","handleServerChange","GroupWork","AddCircleOutline","ActionsModal","_useSelector2","mainVisible","setMainVisible","mainDirection","setMainDirection","createVisible","setCreateVisible","_useState7","_useState8","createDirection","setCreateDirection","_useState9","_useState10","joinVisible","setJoinVisible","_useState11","_useState12","joinDirection","setJoinDirection","_useState13","_useState14","serverName","setServerName","_useState15","_useState16","setServerId","_useState17","_useState18","channelName","setChannelName","handleCreateServer","_response","post","t0","handleJoinServer","_response2","_x3","_x4","handleRenameServer","_ref3","_callee3","_response3","_context3","_x5","_x6","handleDeleteServer","_ref4","_callee4","_response4","_context4","delete","_x7","_x8","handleCreateChannel","_ref5","_callee5","_response5","_context5","_x9","_x10","handleRenameChannel","_ref6","_callee6","_response6","_context6","_x11","_x12","handleDeleteChannel","_ref7","_callee7","_response7","_context7","_x13","_x14","handleKeyPress","callbackMethod","Paper","mountOnEnter","unmountOnExit","Grid","container","spacing","justify","alignItems","item","xs","color","align","sm","Card","CardActionArea","CardContent","gutterBottom","paragraph","CardMedia","AddToQueue","GroupAdd","TextField","label","value","onChange","target","onKeyPress","margin","autoComplete","style","backgroundColor","marginRight","marginLeft","Sidebar","activeView","modalVisible","snackContent","setSnackContent","snackVisible","setSnackVisible","pass","Modal","aria-labelledby","aria-describedby","SendMessage","_useSelector","activePMUser","chatMessage","setChatMessage","emojiMenuVisible","setEmojiMenuVisible","placeholderTitle","setPlaceholderTitle","handleSubmit","msg","validMessage","trim","isValidMessage","replace","window","onclick","String","includes","TextareaAutosize","aria-label","placeholder","handleOnChange","shiftKey","from","to","SentimentVerySatisfied_default","dist_es","set","onSelect","native","handleEmojiClick","useStyle","makeStyles","theme","card","display","flexDirection","justifyContent","textAlign","width","background","cardHeader","image","marginTop","marginBottom","cardInput","padding","input","UserInfo","setUserInfoVisible","classes","messageText","setMessageText","handleSendPrivateMessage","InputProps","InputLabelProps","shrink","ActiveUserList","activeUserList","userInfoVisible","setUserName","setAnchorEl","handleUserClick","user_name","Popover","Header","sideBarDrawerVisible","setSideBarDrawerVisible","userListDrawerVisible","setUserListDrawerVisible","setTitle","AppBar","position","Toolbar","edge","Menu_default","SwipeableDrawer","anchor","onOpen","Link","href","SvgIcon","d","Messages","messageIndex","setMessageIndex","loadMessages","setLoadMessages","messageContainerBottomRef","messageContainerRef","messages","messagesLength","scroll","scrollIntoView","block","behavior","formatCode","PR","prettyPrint","onScroll","element","scrollTop","handleScrollTop","ref","CircularProgress","slice","Fade","startsWith","endsWith","isTextCodeBlock","moment","date","format","secondary","dangerouslySetInnerHTML","__html","Dashboard","updateActiveStatus","push","addEventListener","vh","innerHeight","documentElement","setProperty","Auth","loginVisible","setLoginVisible","loginDirection","setLoginDirection","userNameError","setUserNameError","userNameErrorMsg","setUserNameErrorMsg","_useState19","_useState20","userPass","setUserPass","_useState21","_useState22","userPassError","setUserPassError","_useState23","_useState24","userPassErrorMsg","setUserPassErrorMsg","_useState25","_useState26","rememberMe","setRememberMe","showMain","handleOnSubmit","error","handleCreateAccount","errorData","encodeURIComponent","setItem","JSON","stringify","handleLoginAccount","ArrowBack","helperText","Checkbox","checked","App","ThemeProvider","react_router_dom","parse","getItem","checkLocalStorageAuth","react_router","path","exact","component","createMuiTheme","overrides","MuiTooltip","tooltip","fontSize","MuiSnackbarContent","root","MuiAppBar","colorPrimary","palette","main","typography","fontFamily","fontWeightLight","fontWeightRegular","fontWeightMedium","initialState","Default-FANfDprXmt","general-0m5vBsRnfd","combineReducers","action","RECEIVE_SOCKET_MESSAGE","_action$payload","objectSpread","defineProperty","toConsumableArray","RECEIVE_SOCKET_PRIVATE_MESSAGE","RECEIVE_SOCKET_JOIN_VOICE","RECEIVE_SOCKET_RTC_SIGNAL","RECEIVE_SOCKET_LEAVE_VOICE","baseUrl","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","storeAPI","socket","io","emit","on","setupSocketListener","serverIds","ReactDOM","render","es","components_App_App"],"mappings":"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","file":"static/js/main.4fd66208.chunk.js","sourcesContent":["export enum ACTION {\r\n  RECEIVE_SOCKET_MESSAGE,\r\n  RECEIVE_SOCKET_PRIVATE_MESSAGE,\r\n  RECEIVE_SOCKET_JOIN_VOICE,\r\n  RECEIVE_SOCKET_RTC_SIGNAL,\r\n  RECEIVE_SOCKET_LEAVE_VOICE,\r\n  SEND_SOCKET_MESSAGE,\r\n  SEND_SOCKET_PRIVATE_MESSAGE,\r\n  SEND_SOCKET_JOIN_VOICE,\r\n  SEND_SOCKET_RTC_SIGNAL,\r\n  SEND_SOCKET_LEAVE_VOICE,\r\n  ADD_SERVER,\r\n  ADD_PRIVATE_MESSAGE,\r\n  ADD_CHANNEL,\r\n  CHANGE_CHANNEL,\r\n  CHANGE_SERVER,\r\n  CHANGE_VIEW,\r\n  CHANGE_PM_USER,\r\n  CLEAR_VOICE_CONNECTION,\r\n  UPDATE_ACTIVE_USERS,\r\n  UPDATE_ACTIVE_STATE,\r\n  SIGN_IN,\r\n  SIGN_OUT,\r\n  GET_INITIAL_DATA\r\n}\r\n\r\nexport type ChatActionTypes =\r\n  | ReceiveMessageAction\r\n  | ReceivePrivateMessageAction\r\n  | ReceiveJoinVoiceAction\r\n  | ReceiveRtcSignalAction\r\n  | ReceiveLeaveVoiceAction\r\n  | ClearVoiceConnectionAction\r\n  | AddChannelAction\r\n  | AddServerAction\r\n  | ChangeServerAction\r\n  | ChangeChannelAction\r\n  | ChangeViewAction\r\n  | ChangePmUserAction\r\n  | LoadUserDataAction\r\n  | UpdateActiveUsersAction;\r\n\r\nexport type SocketActions =\r\n  | SendMessageAction\r\n  | SendPrivateMessageAction\r\n  | SignInAction\r\n  | LoadUserDataAction\r\n  | AddServerAction\r\n  | UpdateActiveStateAction\r\n  | SendJoinVoiceAction\r\n  | SendRtcSignalAction\r\n  | SendLeaveVoiceAction;\r\n\r\nexport type UserActionTypes = SignInAction | SignOutAction;\r\n\r\n/* Actions Types */\r\nexport type SendMessageAction = {\r\n  type: ACTION.SEND_SOCKET_MESSAGE;\r\n  payload: SendMessageData;\r\n};\r\n\r\nexport type ReceiveMessageAction = {\r\n  type: ACTION.RECEIVE_SOCKET_MESSAGE;\r\n  payload: ReceiveMessageData;\r\n};\r\n\r\nexport type SendPrivateMessageAction = {\r\n  type: ACTION.SEND_SOCKET_PRIVATE_MESSAGE;\r\n  payload: SendPrivateMessageData;\r\n};\r\n\r\nexport type ReceivePrivateMessageAction = {\r\n  type: ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE;\r\n  payload: ReceivePrivateMessageData;\r\n};\r\n\r\nexport type SendJoinVoiceAction = {\r\n  type: ACTION.SEND_SOCKET_JOIN_VOICE;\r\n  payload: SendJoinVoiceData;\r\n};\r\n\r\nexport type ReceiveJoinVoiceAction = {\r\n  type: ACTION.RECEIVE_SOCKET_JOIN_VOICE;\r\n  payload: ReceiveJoinVoiceData;\r\n};\r\n\r\nexport type SendLeaveVoiceAction = {\r\n  type: ACTION.SEND_SOCKET_LEAVE_VOICE;\r\n  payload: SendLeaveVoiceData;\r\n};\r\n\r\nexport type ReceiveLeaveVoiceAction = {\r\n  type: ACTION.RECEIVE_SOCKET_LEAVE_VOICE;\r\n  payload: ReceiveLeaveVoiceData;\r\n};\r\n\r\nexport type SendRtcSignalAction = {\r\n  type: ACTION.SEND_SOCKET_RTC_SIGNAL;\r\n  payload: SendRtcSignalData;\r\n};\r\n\r\nexport type ReceiveRtcSignalAction = {\r\n  type: ACTION.RECEIVE_SOCKET_RTC_SIGNAL;\r\n  payload: ReceiveRtcSignalData;\r\n};\r\n\r\nexport type ClearVoiceConnectionAction = {\r\n  type: ACTION.CLEAR_VOICE_CONNECTION;\r\n  payload: null;\r\n};\r\n\r\nexport type AddChannelAction = {\r\n  type: ACTION.ADD_CHANNEL;\r\n  payload: AddChannelData;\r\n};\r\n\r\nexport type AddServerAction = {\r\n  type: ACTION.ADD_SERVER;\r\n  payload: AddServerData;\r\n};\r\n\r\nexport type UpdateActiveUsersAction = {\r\n  type: ACTION.UPDATE_ACTIVE_USERS;\r\n  payload: { user_name: string }[];\r\n};\r\n\r\nexport type UpdateActiveStateAction = {\r\n  type: ACTION.UPDATE_ACTIVE_STATE;\r\n  payload: null;\r\n};\r\n\r\nexport type ChangeServerAction = {\r\n  type: ACTION.CHANGE_SERVER;\r\n  payload: string;\r\n};\r\n\r\nexport type ChangeChannelAction = {\r\n  type: ACTION.CHANGE_CHANNEL;\r\n  payload: string;\r\n};\r\n\r\nexport type ChangeViewAction = {\r\n  type: ACTION.CHANGE_VIEW;\r\n  payload: string;\r\n};\r\n\r\nexport type ChangePmUserAction = {\r\n  type: ACTION.CHANGE_PM_USER;\r\n  payload: string;\r\n};\r\n\r\nexport type LoadUserDataAction = {\r\n  type: ACTION.GET_INITIAL_DATA;\r\n  payload: LoadInitialData;\r\n};\r\n\r\nexport type SignInAction = {\r\n  type: ACTION.SIGN_IN;\r\n  payload: SignInData;\r\n};\r\n\r\nexport type SignOutAction = {\r\n  type: ACTION.SIGN_OUT;\r\n  payload: null;\r\n};\r\n\r\n/* Interfaces for Data coming into Action Creators */\r\n\r\nexport interface SendMessageData {\r\n  type: 'channelMessage';\r\n  server: string;\r\n  channel: string;\r\n  from: string;\r\n  msg: string;\r\n}\r\n\r\nexport interface SendPrivateMessageData {\r\n  type: 'privateMessage';\r\n  from: string;\r\n  to: string;\r\n  msg: string;\r\n}\r\n\r\nexport interface ReceiveMessageData {\r\n  server: string;\r\n  channel: string;\r\n  from: string;\r\n  msg: string;\r\n  date: Date;\r\n}\r\n\r\nexport interface ReceivePrivateMessageData {\r\n  user: string;\r\n  from: string;\r\n  to: string;\r\n  msg: string;\r\n  date: Date;\r\n}\r\n\r\nexport interface AddChannelData {\r\n  server: string;\r\n  channel: string;\r\n}\r\n\r\nexport interface AddServerData {\r\n  server: string;\r\n  channel: string;\r\n}\r\n\r\nexport interface LoadInitialData {\r\n  servers: {\r\n    [serverName: string]: {\r\n      channels: {\r\n        [channelName: string]: { from: string; to: string; msg: string; date: Date }[];\r\n      };\r\n    };\r\n  };\r\n  privateMessages: {\r\n    [userPM: string]: { from: string; to: string; msg: string; user: string; date: Date }[];\r\n  };\r\n}\r\n\r\nexport interface SendJoinVoiceData {\r\n  userId: string;\r\n  userName: string;\r\n  channelId: string;\r\n}\r\n\r\nexport interface ReceiveJoinVoiceData {\r\n  userId: string;\r\n  clients: { userId: string; userName: string }[];\r\n}\r\n\r\nexport interface SendLeaveVoiceData {\r\n  userId: string;\r\n  userName: string;\r\n  channelId: string;\r\n}\r\n\r\nexport interface ReceiveLeaveVoiceData {\r\n  userId: string;\r\n  clients: { userId: string; userName: string }[];\r\n}\r\n\r\nexport interface SendRtcSignalData {\r\n  userId: string;\r\n  ice?: any;\r\n  sdp?: any;\r\n}\r\n\r\nexport interface ReceiveRtcSignalData {\r\n  userId: string;\r\n  clients: string[];\r\n}\r\n\r\nexport interface SignInData {\r\n  userId: string;\r\n  userName: string;\r\n}\r\n","import axios from 'axios';\r\n\r\nconst baseUrl = process.env.NODE_ENV === 'development' ? 'http://localhost:3001' : process.env.REACT_APP_API_URL;\r\n\r\nexport default axios.create({\r\n  baseURL: baseUrl\r\n});\r\n","import axios from '../components/Api/api';\r\nimport { ThunkDispatch } from 'redux-thunk';\r\nimport { AnyAction } from 'redux';\r\n\r\nimport {\r\n  ACTION,\r\n  UpdateActiveStateAction,\r\n  ChangeServerAction,\r\n  ChangeChannelAction,\r\n  ChangeViewAction,\r\n  ChangePmUserAction,\r\n  LoadUserDataAction,\r\n  LoadInitialData,\r\n  SignInAction,\r\n  SignInData,\r\n  SignOutAction,\r\n  SendJoinVoiceData,\r\n  SendJoinVoiceAction,\r\n  ReceiveJoinVoiceData,\r\n  ReceiveJoinVoiceAction,\r\n  SendRtcSignalData,\r\n  ReceiveRtcSignalData,\r\n  ReceiveRtcSignalAction,\r\n  SendRtcSignalAction,\r\n  SendLeaveVoiceAction,\r\n  ReceiveLeaveVoiceAction,\r\n  SendLeaveVoiceData,\r\n  ReceiveLeaveVoiceData,\r\n  ClearVoiceConnectionAction\r\n} from './types';\r\nimport {\r\n  SendMessageData,\r\n  ReceiveMessageData,\r\n  SendPrivateMessageData,\r\n  ReceivePrivateMessageData,\r\n  AddChannelData,\r\n  AddServerData\r\n} from './types';\r\nimport {\r\n  SendMessageAction,\r\n  ReceiveMessageAction,\r\n  SendPrivateMessageAction,\r\n  ReceivePrivateMessageAction,\r\n  AddChannelAction,\r\n  AddServerAction\r\n} from './types';\r\n\r\n// Action to send a message (Handled by socket middleware)\r\nexport const sendMessage = (message: SendMessageData): SendMessageAction => ({\r\n  type: ACTION.SEND_SOCKET_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to add message to a channel (Handled by socket middleware)\r\nexport const receiveMessage = (message: ReceiveMessageData): ReceiveMessageAction => ({\r\n  type: ACTION.RECEIVE_SOCKET_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to send new private message (Handled by socket middleware)\r\nexport const sendPrivateMessage = (message: SendPrivateMessageData): SendPrivateMessageAction => ({\r\n  type: ACTION.SEND_SOCKET_PRIVATE_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to send new private message (Handled by socket middleware)\r\nexport const receivePrivateMessage = (message: ReceivePrivateMessageData): ReceivePrivateMessageAction => ({\r\n  type: ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE,\r\n  payload: message\r\n});\r\n\r\n// Action to send a join voice channel message (Handles by socket middleware)\r\nexport const sendJoinVoice = (data: SendJoinVoiceData): SendJoinVoiceAction => ({\r\n  type: ACTION.SEND_SOCKET_JOIN_VOICE,\r\n  payload: data\r\n});\r\n\r\n// Action to receive join voice channel message (Handles by socket middlware)\r\nexport const receiveJoinVoice = (data: ReceiveJoinVoiceData): ReceiveJoinVoiceAction => ({\r\n  type: ACTION.RECEIVE_SOCKET_JOIN_VOICE,\r\n  payload: data\r\n});\r\n\r\nexport const sendRtcSignal = (data: SendRtcSignalData): SendRtcSignalAction => ({\r\n  type: ACTION.SEND_SOCKET_RTC_SIGNAL,\r\n  payload: data\r\n});\r\n\r\nexport const sendLeaveVoice = (data: SendLeaveVoiceData): SendLeaveVoiceAction => ({\r\n  type: ACTION.SEND_SOCKET_LEAVE_VOICE,\r\n  payload: data\r\n});\r\n\r\nexport const receiveLeaveVoice = (data: ReceiveLeaveVoiceData): ReceiveLeaveVoiceAction => ({\r\n  type: ACTION.RECEIVE_SOCKET_LEAVE_VOICE,\r\n  payload: data\r\n});\r\n\r\nexport const clearVoiceConnection = (): ClearVoiceConnectionAction => ({\r\n  type: ACTION.CLEAR_VOICE_CONNECTION,\r\n  payload: null\r\n});\r\n\r\nexport const receiveRtcSignal = (data: ReceiveRtcSignalData): ReceiveRtcSignalAction => ({\r\n  type: ACTION.RECEIVE_SOCKET_RTC_SIGNAL,\r\n  payload: data\r\n});\r\n\r\n// Action to add Channel to a Server\r\nexport const addChannel = (channel: AddChannelData): AddChannelAction => ({\r\n  type: ACTION.ADD_CHANNEL,\r\n  payload: channel\r\n});\r\n\r\n// Action to add Server to server list\r\nexport const addServer = (server: AddServerData): AddServerAction => ({\r\n  type: ACTION.ADD_SERVER,\r\n  payload: server\r\n});\r\n\r\n// Get active user list in given server\r\nexport const updateActiveUserList = (serverId: string) => async (dispatch: ThunkDispatch<{}, {}, AnyAction>) => {\r\n  const response = await axios.get(`/server/activeusers?serverId=${serverId}`);\r\n  dispatch({ type: ACTION.UPDATE_ACTIVE_USERS, payload: response.data });\r\n};\r\n\r\n// Action creator to update active state (socket middleware)\r\nexport const updateActiveState = (): UpdateActiveStateAction => ({\r\n  type: ACTION.UPDATE_ACTIVE_STATE,\r\n  payload: null\r\n});\r\n\r\n// Action to change the current Active Server\r\nexport const changeServer = (server: string) => (dispatch: ThunkDispatch<{}, {}, AnyAction>) => {\r\n  dispatch(updateActiveUserList(server.split('-')[1]));\r\n  dispatch<ChangeServerAction>({ type: ACTION.CHANGE_SERVER, payload: server });\r\n};\r\n\r\n// Action to change the current Active Channel\r\nexport const changeChannel = (channel: string): ChangeChannelAction => ({\r\n  type: ACTION.CHANGE_CHANNEL,\r\n  payload: channel\r\n});\r\n\r\n// Action to change the current active view\r\nexport const changeView = (view: string): ChangeViewAction => ({\r\n  type: ACTION.CHANGE_VIEW,\r\n  payload: view\r\n});\r\n\r\n// Action to change active user we have private message open with\r\nexport const changePMUser = (user: string): ChangePmUserAction => ({\r\n  type: ACTION.CHANGE_PM_USER,\r\n  payload: user\r\n});\r\n\r\n// Loads user Data. Gets all Servers + Channel History\r\nexport const loadUserData = (userId: string) => async (dispatch: ThunkDispatch<{}, {}, AnyAction>) => {\r\n  let url = `/user/data?userId=${userId}`;\r\n  const res = await axios.get<LoadInitialData>(url);\r\n  // get active user list for first server\r\n  dispatch(updateActiveUserList(Object.keys(res.data.servers)[0].split('-')[1]));\r\n  dispatch<LoadUserDataAction>({ type: ACTION.GET_INITIAL_DATA, payload: res.data });\r\n};\r\n\r\n// On sign in\r\nexport const signIn = (user: SignInData): SignInAction => ({\r\n  type: ACTION.SIGN_IN,\r\n  payload: user\r\n});\r\n\r\n// On sign out\r\nexport const signOut = (): SignOutAction => ({\r\n  type: ACTION.SIGN_OUT,\r\n  payload: null\r\n});\r\n","import { createHashHistory } from 'history';\r\n\r\nexport default createHashHistory();\r\n","import React from 'react'\r\nimport { Snackbar } from '@material-ui/core';\r\n\r\n// Snackbar that allows you to set the content, visibility \r\n// and change visibility from parent component\r\nexport default function SnackBarContent(props) {\r\n\r\n  const { content, visible, setVisible } = props;\r\n\r\n  // When opened, closes itself after 2.5sec\r\n  const handleSnackBarOpen = () => {\r\n    setTimeout(() => {\r\n      setVisible(false);\r\n    }, 2500)\r\n  }\r\n\r\n  return (\r\n    <Snackbar\r\n      open={visible}\r\n      message={content}\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left'\r\n      }}\r\n      onEntered={() => handleSnackBarOpen()}\r\n    />\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { List, ListItem, ListItemAvatar, Avatar, ListItemText, Slide, Button, Typography } from '@material-ui/core';\r\nimport { Person } from '@material-ui/icons';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { signOut, changePMUser } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function PrivateMessageUserList() {\r\n  // Get from Redux store\r\n  const { privateMessages } = useSelector((state: StoreState) => state.chat);\r\n  const user = useSelector((state: StoreState) => state.user);\r\n  const userList = Object.keys(privateMessages);\r\n  const dispatch = useDispatch();\r\n\r\n  // Signs the user out\r\n  const handleSignOut = () => {\r\n    localStorage.clear();\r\n    dispatch(signOut());\r\n  };\r\n\r\n  return (\r\n    <div className=\"channels-container\">\r\n      <List className=\"channel-list\">\r\n        <ListItem className=\"title-container\">Home</ListItem>\r\n        {userList.map((userItem, i) => (\r\n          <Slide direction=\"right\" in={true} timeout={200 * (i + 1)} key={i}>\r\n            <ListItem button className=\"user-item\" onClick={() => dispatch(changePMUser(userItem))}>\r\n              <Avatar>\r\n                {' '}\r\n                <img className=\"user\" src={process.env.PUBLIC_URL + '/user.png'} alt=\"user icon\" height=\"48\" />{' '}\r\n              </Avatar>\r\n              <Typography variant=\"body1\" className=\"user-list-name\">\r\n                {userItem}\r\n              </Typography>\r\n            </ListItem>\r\n          </Slide>\r\n        ))}\r\n      </List>\r\n\r\n      <div className=\"user-options\">\r\n        <ListItem className=\"user-info\">\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <Person />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary={user.userName} />\r\n          <Button onClick={handleSignOut}>Sign out</Button>\r\n        </ListItem>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Person, MoreVert, Settings } from '@material-ui/icons';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  Avatar,\r\n  Tooltip,\r\n  IconButton,\r\n  Typography,\r\n  ListItemText,\r\n  Menu,\r\n  MenuItem,\r\n  Slide,\r\n  Button\r\n} from '@material-ui/core';\r\nimport {\r\n  changeChannel,\r\n  signOut,\r\n  sendJoinVoice,\r\n  sendRtcSignal,\r\n  sendLeaveVoice,\r\n  clearVoiceConnection\r\n} from '../../actions';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport axios from '../Api/api';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface ChannelListProps {\r\n  setDrawerVisible?: (drawerVisible: boolean) => void;\r\n  setModalVisible: (modalVisible: boolean) => void;\r\n  setModalType: (modalType: string) => void;\r\n  handleSnackMessage: (response: string, pass: boolean) => void;\r\n}\r\n\r\n// Audio stream vars\r\nlet localStream: any;\r\nlet prevActiveChannel: string;\r\nlet connections: any;\r\nlet peerConnectionConfig = {\r\n  iceServers: [{ urls: 'stun:stun.services.mozilla.com' }, { urls: 'stun:stun.l.google.com:19302' }]\r\n};\r\n\r\nexport default function ChannelList(props: ChannelListProps) {\r\n  // Get State from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const channels = Object.keys(chatStore.servers[chatStore.activeServer]['channels']);\r\n  const { activeServer, activeChannel, voiceClients, voiceJoinUserId, rtcSignalData, voiceLeaveUserId } = chatStore;\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state: StoreState) => state.user);\r\n\r\n  // Get props from parent\r\n  const { setDrawerVisible, setModalVisible, setModalType, handleSnackMessage } = props;\r\n\r\n  // Local state\r\n  const [serverAnchorEl, setServerAnchorEl] = useState(null);\r\n  const [channelAnchorEl, setChannelAnchorEl] = useState(null);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  // When user or active server changes, check if we are admin\r\n  useEffect(() => {\r\n    // Gets the status if we are admin of current server (allows us to change server settings)\r\n    async function getAdmin() {\r\n      let serverId = activeServer.split('-')[1];\r\n      const response = await axios.get(`/server/admin?serverId=${serverId}&userId=${user.userId}`);\r\n      setIsAdmin(response.data);\r\n    }\r\n\r\n    getAdmin();\r\n  }, [activeServer, user]);\r\n\r\n  // Handle channel change, and closes drawer if on mobile view\r\n  const handleChannelChange = (channel: string) => {\r\n    dispatch(changeChannel(channel));\r\n    if (typeof setDrawerVisible !== 'undefined') setDrawerVisible(false);\r\n  };\r\n\r\n  // Checks if only 1 channel, if so does not call callback to delete channel\r\n  const handleChannelDelete = (callBack: Function) => {\r\n    if (channels.length === 1) {\r\n      handleSnackMessage('Please delete the server if only 1 channel', false);\r\n    } else {\r\n      callBack();\r\n    }\r\n  };\r\n\r\n  // Handles to show modal, and its type\r\n  const handleModalShow = (modalType: string) => {\r\n    setModalType(modalType);\r\n    setModalVisible(true);\r\n  };\r\n\r\n  // Handles showing of Settings Menu\r\n  const handleSettingsClick = (e: any, type: string) => {\r\n    if (type === 'server') setServerAnchorEl(e.currentTarget);\r\n    else if (type === 'channel') setChannelAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  // Handles closing settings menu\r\n  const handleClose = () => {\r\n    setServerAnchorEl(null);\r\n    setChannelAnchorEl(null);\r\n  };\r\n\r\n  // Signs the user out\r\n  const handleSignOut = () => {\r\n    localStorage.clear();\r\n    dispatch(signOut());\r\n  };\r\n\r\n  // Handles saving serverId to clipboard\r\n  const handleSaveClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    handleSnackMessage(`Server ID ${text} saved to clipboard`, false);\r\n  };\r\n\r\n  // // Listens for changes on user signed in, asks browser for microphone access\r\n  useEffect(() => {\r\n    if (navigator.mediaDevices.getUserMedia && user.isSignedIn) {\r\n      navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {\r\n        localStream = stream;\r\n      });\r\n    }\r\n  }, [user.isSignedIn]);\r\n\r\n  // Listens for changes on active channel, and joins voice if channel is a voice channel\r\n  useEffect(() => {\r\n    if (activeChannel.split('-')[0] === 'voice') {\r\n      let data = { userId: user.userId, userName: user.userName, channelId: activeChannel.split('-')[1] };\r\n      attachVoiceChannel();\r\n      dispatch(sendJoinVoice(data));\r\n      prevActiveChannel = activeChannel;\r\n    } else {\r\n      let data;\r\n      if (prevActiveChannel)\r\n        data = { userId: user.userId, userName: user.userName, channelId: prevActiveChannel.split('-')[1] };\r\n      else data = { userId: user.userId, userName: user.userName, channelId: activeChannel.split('-')[1] };\r\n      dispatch(sendLeaveVoice(data));\r\n      dispatch(clearVoiceConnection());\r\n      disconnectPreviousVoice();\r\n    }\r\n    prevActiveChannel = activeChannel;\r\n  }, [activeChannel]);\r\n\r\n  // Listens for changes on new voice clients\r\n  useEffect(() => {\r\n    if (voiceJoinUserId && voiceClients) {\r\n      onUserJoin(voiceJoinUserId, voiceClients);\r\n    }\r\n  }, [voiceJoinUserId, voiceClients]);\r\n\r\n  // Listens for changes on our signaling data\r\n  useEffect(() => {\r\n    const userId = rtcSignalData.userId;\r\n    const message = rtcSignalData;\r\n    if (voiceJoinUserId !== '') gotMessageFromServer(userId, message);\r\n  }, [rtcSignalData, voiceJoinUserId]);\r\n\r\n  // Listens for changes on users leaving voice channel\r\n  useEffect(() => {\r\n    if (voiceLeaveUserId !== '') {\r\n      onUserLeave(voiceLeaveUserId);\r\n    }\r\n  }, [voiceLeaveUserId]);\r\n\r\n  // When user accepts, add their stream to page\r\n  const attachVoiceChannel = () => {\r\n    let audios = document.createElement('div');\r\n    audios.id = 'audiosContainer';\r\n\r\n    let div = document.createElement('div');\r\n    div.innerText = user.userName;\r\n\r\n    let audio = document.createElement('audio');\r\n    // Set data properties of new audio element\r\n    audio.srcObject = localStream;\r\n    audio.autoplay = true;\r\n    audio.controls = true;\r\n    audio.muted = true;\r\n\r\n    // Put element into the page\r\n    div.appendChild(audio);\r\n    audios.appendChild(div);\r\n    let audiosParent = document.getElementById(activeChannel.split('-')[0]);\r\n    if (audiosParent) {\r\n      if (audiosParent.parentNode) {\r\n        audiosParent.parentNode.insertBefore(audios, audiosParent.nextSibling);\r\n      }\r\n    }\r\n  };\r\n\r\n  // On user join add to connections array and bind event handlers + create offers\r\n  const onUserJoin = (newUserId: string, clients: { userName: string; userId: string }[]) => {\r\n    // Iterate over client list\r\n    clients.forEach(user => {\r\n      // If new client isnt in our list\r\n      if (!connections[user.userId]) {\r\n        // Add this new users Peer connection to our connections array ( use stun servers )\r\n        connections[user.userId] = new RTCPeerConnection(peerConnectionConfig);\r\n\r\n        // Wait for peer to generate ice candidate\r\n        connections[user.userId].onicecandidate = (event: any) => {\r\n          if (event.candidate !== null) {\r\n            dispatch(sendRtcSignal({ userId: user.userId, ice: event.candidate }));\r\n          }\r\n        };\r\n\r\n        // Event handler for peer adding their stream\r\n        connections[user.userId].onaddstream = (event: any) => {\r\n          gotRemoteStream(event, user.userId, user.userName);\r\n        };\r\n\r\n        // Adds our local video stream to Peer\r\n        connections[user.userId].addStream(localStream);\r\n      }\r\n    });\r\n\r\n    // Create offer to new client joining if it is not ourselves\r\n    // Dont create offer to ourselves on first join\r\n    if (newUserId !== user.userId) {\r\n      connections[newUserId].createOffer().then((description: RTCSessionDescription) => {\r\n        connections[newUserId]\r\n          .setLocalDescription(description)\r\n          .then(() => {\r\n            dispatch(sendRtcSignal({ userId: newUserId, sdp: connections[newUserId].localDescription }));\r\n          })\r\n          .catch((e: any) => console.log(e));\r\n      });\r\n    }\r\n  };\r\n\r\n  // On user leave close peer connection and remove their audio element\r\n  const onUserLeave = (userId: string) => {\r\n    console.log(connections[userId]);\r\n    // Close RTC peer connection\r\n    connections[userId].close();\r\n    connections[userId] = null;\r\n    // Remove the audio element from page\r\n    let audio = document.querySelector('[data-socket=\"' + userId + '\"]') as HTMLElement;\r\n    let parentDiv = audio.parentElement as HTMLElement;\r\n    let parentContainer = parentDiv.parentElement as HTMLElement;\r\n    parentContainer.removeChild(parentDiv);\r\n  };\r\n\r\n  // New message from server, configure RTC sdp session objects\r\n  const gotMessageFromServer = (fromId: string, signal: any) => {\r\n    //Make sure it's not coming from yourself\r\n    if (fromId !== user.userId) {\r\n      if (signal.sdp) {\r\n        connections[fromId]\r\n          .setRemoteDescription(new RTCSessionDescription(signal.sdp))\r\n          .then(() => {\r\n            if (signal.sdp.type === 'offer') {\r\n              connections[fromId]\r\n                .createAnswer()\r\n                .then((description: any) => {\r\n                  connections[fromId]\r\n                    .setLocalDescription(description)\r\n                    .then(() => {\r\n                      console.log('signaling my answer!!');\r\n                      dispatch(sendRtcSignal({ userId: fromId, sdp: connections[fromId].localDescription }));\r\n                    })\r\n                    .catch((e: any) => console.log(e));\r\n                })\r\n                .catch((e: any) => console.log(e));\r\n            }\r\n          })\r\n          .catch((e: any) => console.log(e));\r\n      }\r\n\r\n      if (signal.ice) {\r\n        console.log('adding ice candiate!');\r\n        connections[fromId].addIceCandidate(new RTCIceCandidate(signal.ice)).catch((e: any) => console.log(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  // If we get a new remote stream, add it to page\r\n  const gotRemoteStream = (event: any, userSocketId: string, userSocketName: string) => {\r\n    // Create our wrapper div\r\n    let div = document.createElement('div');\r\n    div.innerText = userSocketName;\r\n\r\n    // Set data properties of new audio element\r\n    let audio = document.createElement('audio');\r\n    audio.setAttribute('data-socket', userSocketId);\r\n    audio.srcObject = event.stream;\r\n    audio.autoplay = true;\r\n    audio.controls = true;\r\n\r\n    // Get our audios container\r\n    let audios = document.getElementById('audiosContainer') as HTMLElement;\r\n\r\n    // Put element into the page\r\n    div.appendChild(audio);\r\n    audios.appendChild(div);\r\n  };\r\n\r\n  // Disconnects our voice session on change channel\r\n  const disconnectPreviousVoice = () => {\r\n    let audios = document.getElementById('audiosContainer');\r\n    if (audios) {\r\n      audios.outerHTML = '';\r\n    }\r\n    // Close all rtc peer connections and empty array\r\n    if (connections) {\r\n      connections.forEach((connection: string) => {\r\n        connections[connection].close();\r\n      });\r\n    }\r\n    connections = [];\r\n  };\r\n\r\n  return (\r\n    <div className=\"channels-container\">\r\n      <List className=\"channel-list\">\r\n        <ListItem className=\"title-container\">\r\n          {activeServer.split('-')[0]}\r\n          {isAdmin ? (\r\n            <React.Fragment>\r\n              <Tooltip title=\"Server Settings\" key=\"server-settings\" placement=\"right\" className=\"tooltip\">\r\n                <IconButton onClick={e => handleSettingsClick(e, 'server')}>\r\n                  {' '}\r\n                  <MoreVert />{' '}\r\n                </IconButton>\r\n              </Tooltip>\r\n            </React.Fragment>\r\n          ) : null}\r\n        </ListItem>\r\n        {channels.map((channel, i) => (\r\n          <Slide direction=\"right\" in={true} timeout={200 * (i + 1)} key={channel + activeServer}>\r\n            <ListItem\r\n              onClick={e => handleChannelChange(channel)}\r\n              button\r\n              className=\"channel-item\"\r\n              id={`${channel.split('-')[0]}`}\r\n            >\r\n              <Typography variant=\"body1\">\r\n                <i className=\"channel-hashtag\">#</i>\r\n                {channel.split('-')[0].toLowerCase()}\r\n              </Typography>\r\n              {isAdmin ? (\r\n                <Tooltip title=\"Server Settings\" key=\"server-settings\" placement=\"right\" className=\"tooltip\">\r\n                  <IconButton onClick={e => handleSettingsClick(e, 'channel')}>\r\n                    {' '}\r\n                    <Settings className=\"channel-settings\" />{' '}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              ) : null}\r\n            </ListItem>\r\n          </Slide>\r\n        ))}\r\n      </List>\r\n\r\n      <div className=\"user-options\">\r\n        <ListItem className=\"user-info\">\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <Person />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary={user.userName} />\r\n          <Button onClick={handleSignOut}>Sign out</Button>\r\n        </ListItem>\r\n      </div>\r\n\r\n      <Menu\r\n        id=\"server-settings-menu\"\r\n        anchorEl={serverAnchorEl}\r\n        open={Boolean(serverAnchorEl)}\r\n        onClick={handleClose}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem onClick={() => handleSaveClipboard(activeServer.split('-')[1])}>\r\n          {' '}\r\n          Server Id - {activeServer.split('-')[1]}{' '}\r\n        </MenuItem>\r\n        <MenuItem onClick={() => handleModalShow('server-rename')}> Change Server Name </MenuItem>\r\n        <MenuItem onClick={() => handleModalShow('server-delete')}> Delete Server </MenuItem>\r\n        <MenuItem onClick={() => handleModalShow('channel-create')}> Add Channel </MenuItem>\r\n      </Menu>\r\n\r\n      <Menu\r\n        id=\"channel-settings-menu\"\r\n        anchorEl={channelAnchorEl}\r\n        open={Boolean(channelAnchorEl)}\r\n        onClick={handleClose}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem onClick={() => handleModalShow('channel-rename')}> Change Channel Name </MenuItem>\r\n        <MenuItem onClick={() => handleChannelDelete(() => handleModalShow('channel-delete'))}>\r\n          {' '}\r\n          Delete Channel{' '}\r\n        </MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { GroupWork, AddCircleOutline, Home } from '@material-ui/icons';\r\nimport { List, Tooltip, IconButton } from '@material-ui/core';\r\nimport { changeServer, changeView } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface ServerListProps {\r\n  setModalVisible: (modalVisible: boolean) => void;\r\n  setModalType: (modalType: string) => void;\r\n}\r\n\r\nexport default function ServerList(props: ServerListProps) {\r\n  // Get State from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const servers = Object.keys(chatStore.servers);\r\n  const dispatch = useDispatch();\r\n\r\n  // Get props from parent\r\n  const { setModalVisible, setModalType } = props;\r\n\r\n  // Handles server change, and closes drawer if on mobile view\r\n  const handleServerChange = (server: string) => {\r\n    dispatch(changeServer(server));\r\n  };\r\n\r\n  // Handles to show modal, and its type\r\n  const handleModalShow = () => {\r\n    setModalType('server-create-join');\r\n    setModalVisible(true);\r\n  };\r\n\r\n  // Handles changing the view and calls callback function\r\n  const handleChangeView = (view: string, callBack?: Function) => {\r\n    dispatch(changeView(view));\r\n    if (callBack !== undefined) callBack();\r\n  };\r\n\r\n  return (\r\n    <div className=\"servers-container\">\r\n      <List>\r\n        <Tooltip title=\"Home\" key=\"home\" placement=\"right\" className=\"tooltip\">\r\n          <IconButton className=\"home-icon\" onClick={() => handleChangeView('home')}>\r\n            <Home />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <div className=\"menu-seperator\" />\r\n\r\n        {servers.map(server => (\r\n          <Tooltip title={server.split('-')[0]} key={server} placement=\"right\" className=\"tooltip\">\r\n            <IconButton\r\n              className=\"server-icon\"\r\n              onClick={() => handleChangeView('servers', () => handleServerChange(server))}\r\n            >\r\n              <GroupWork />\r\n            </IconButton>\r\n          </Tooltip>\r\n        ))}\r\n\r\n        <Tooltip title=\"Create Server\" key=\"create-server\" placement=\"right\" className=\"tooltip\">\r\n          <IconButton className=\"server-icon\" onClick={() => handleChangeView('servers', () => handleModalShow())}>\r\n            <AddCircleOutline />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, KeyboardEvent } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n  Paper,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  CardActionArea,\r\n  CardMedia,\r\n  Slide,\r\n  TextField,\r\n  Grid\r\n} from '@material-ui/core';\r\nimport { GroupAdd, AddToQueue } from '@material-ui/icons';\r\nimport axios from '../Api/api';\r\n\r\nimport { addChannel, addServer } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface ActionsModalProps {\r\n  handleSnackMessage: (response: string, pass: boolean) => void;\r\n  modalType: string;\r\n}\r\n\r\nexport default function ActionsModal(props: ActionsModalProps) {\r\n  // Get State from Redux Store\r\n  const { userId } = useSelector((state: StoreState) => state.user);\r\n  const { activeServer, activeChannel } = useSelector((state: StoreState) => state.chat);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // Get data from props\r\n  const { handleSnackMessage, modalType } = props;\r\n\r\n  // Local state to control Modal Windows + Data fields\r\n  const [mainVisible, setMainVisible] = useState(true);\r\n  const [mainDirection, setMainDirection]: any = useState('left');\r\n  const [createVisible, setCreateVisible] = useState(false);\r\n  const [createDirection, setCreateDirection]: any = useState('left');\r\n  const [joinVisible, setJoinVisible] = useState(false);\r\n  const [joinDirection, setJoinDirection]: any = useState('left');\r\n  const [serverName, setServerName] = useState('');\r\n  const [serverId, setServerId] = useState('');\r\n  const [channelName, setChannelName] = useState('');\r\n\r\n  // Handles showing the Join Server window\r\n  const showhandleJoinServer = () => {\r\n    setMainDirection('right');\r\n    setCreateDirection('left');\r\n    setJoinVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Handles showing the Create Server window\r\n  const showhandleCreateServer = () => {\r\n    setMainDirection('right');\r\n    setJoinDirection('left');\r\n    setCreateVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Method to handle creation of servers\r\n  const handleCreateServer = async (serverName: string, userId: string) => {\r\n    try {\r\n      const response = await axios.post(`/server/create?serverName=${serverName}&userId=${userId}`);\r\n      dispatch(addServer(response.data));\r\n      const message = `Server ${response.data.server.split('-')[0]} with ID ${\r\n        response.data.server.split('-')[1]\r\n      } created`;\r\n      handleSnackMessage(message, false);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle joining of servers\r\n  const handleJoinServer = async (serverId: string, userId: string) => {\r\n    try {\r\n      const response = await axios.post(`/server/join?serverId=${serverId}&userId=${userId}`);\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle renaming of servers\r\n  const handleRenameServer = async (serverName: string, serverId: string) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `/server/rename?serverName=${serverName}&serverId=${serverId}&userId=${userId}`\r\n      );\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle deleting servers\r\n  const handleDeleteServer = async (serverId: string, userId: string) => {\r\n    try {\r\n      const response = await axios.delete(`/server/delete?serverId=${serverId}&userId=${userId}`);\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle creation of channels\r\n  const handleCreateChannel = async (channelName: string, server: string) => {\r\n    try {\r\n      const response = await axios.post(`/channel/create?channelName=${channelName}&server=${server}&userId=${userId}`);\r\n      dispatch(addChannel(response.data));\r\n      const message = `Server ${response.data.channel.split('-')[0]} with ID ${response.data.channel.split(\r\n        '-'[1]\r\n      )} created`;\r\n      handleSnackMessage(message, false);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle renaming of channels\r\n  const handleRenameChannel = async (channelName: string, channelId: string) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `/channel/rename?channelName=${channelName}&channelId=${channelId}&serverId=${\r\n          activeServer.split('-')[1]\r\n        }&userId=${userId}`\r\n      );\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Method to handle deleting of channels\r\n  const handleDeleteChannel = async (channelName: string, channelId: string) => {\r\n    try {\r\n      const response = await axios.delete(\r\n        `/channel/delete?channelId=${channelId}&serverId=${activeServer.split('-')[1]}&userId=${userId}`\r\n      );\r\n      handleSnackMessage(response.data, true);\r\n    } catch (err) {\r\n      handleSnackMessage(err.response.data, false);\r\n    }\r\n  };\r\n\r\n  // Handles keypress and calls the callback method\r\n  const handleKeyPress = (e: KeyboardEvent, callbackMethod: Function) => {\r\n    if (e.key === 'Enter') {\r\n      callbackMethod();\r\n    }\r\n  };\r\n\r\n  // Renders the Main Modal Window with options to Create / Join server\r\n  const renderMainServer = () => {\r\n    return (\r\n      <Slide direction={mainDirection} in={mainVisible} timeout={500} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Another server? Wow you're popular!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showhandleCreateServer()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"primary\" gutterBottom>\r\n                    Create\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Create a server and invite all your buddies.\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <AddToQueue className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"primary\" className=\"modal-button\">\r\n                    Join a server\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showhandleJoinServer()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"secondary\" gutterBottom>\r\n                    Join\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Join a friends server and pwn some noobs!\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <GroupAdd className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"secondary\" className=\"modal-button\">\r\n                    Join a server\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the Server Create Modal Window\r\n  const renderServerCreate = () => {\r\n    return (\r\n      <Slide direction={createDirection} in={createVisible} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create a Server!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a Server Name to create a server and get access to unlimited chat channels!{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-server-field\"\r\n              label=\"Server Name\"\r\n              value={serverName}\r\n              onChange={e => setServerName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleCreateServer(serverName, userId))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleCreateServer(serverName, userId)}\r\n            >\r\n              Create Server\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal with an input\r\n  const renderServerRename = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Rename Server\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a new Server Name for Server - {activeServer.split('-')[0]}{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-channel-field\"\r\n              label=\"Channel Name\"\r\n              value={serverName}\r\n              onChange={e => setServerName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleRenameServer(serverName, activeServer.split('-')[1]))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleRenameServer(serverName, activeServer.split('-')[1])}\r\n            >\r\n              Rename Server\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal to delete a server\r\n  const renderServerDelete = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Delete Server\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Are you sure you want to delete - {activeServer.split('-')[0]}{' '}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'green', marginRight: '8px' }}\r\n              onClick={() => handleDeleteServer(activeServer.split('-')[1], userId)}\r\n            >\r\n              Yes\r\n            </Button>\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'red', marginLeft: '8px' }}\r\n              onClick={() => handleSnackMessage('Not deleting channel', false)}\r\n            >\r\n              No\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the Server Join Modal Window\r\n  const renderServerJoin = () => {\r\n    return (\r\n      <Slide direction={joinDirection} in={joinVisible} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Join a Server!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a the Server Id provided by your friend and start chatting right now!{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"join-server-field\"\r\n              label=\"Server Id\"\r\n              value={serverId}\r\n              onChange={e => setServerId(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleJoinServer(serverId, userId))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleJoinServer(serverId, userId)}\r\n            >\r\n              Join Server\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the Channel Create Modal Window\r\n  const renderChannelCreate = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create a Channel!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a Channel Name for your new channel and start chatting right now!{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-channel-field\"\r\n              label=\"Channel Name\"\r\n              value={channelName}\r\n              onChange={e => setChannelName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleCreateChannel(channelName, activeServer))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleCreateChannel(channelName, activeServer)}\r\n            >\r\n              Create Channel\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal to rename a channel\r\n  const renderChannelRename = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Rename Chanel\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Enter a new Channel Name for Channel - {activeChannel.split('-')[0]}{' '}\r\n            </Typography>\r\n            <TextField\r\n              id=\"create-channel-field\"\r\n              label=\"Channel Name\"\r\n              value={channelName}\r\n              onChange={e => setChannelName(e.target.value)}\r\n              onKeyPress={e => handleKeyPress(e, () => handleRenameChannel(channelName, activeChannel.split('-')[1]))}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"off\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleRenameChannel(channelName, activeChannel.split('-')[1])}\r\n            >\r\n              Rename Channel\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders a modal to delete a channel\r\n  const renderChannelDelete = () => {\r\n    return (\r\n      <Slide direction=\"left\" in={true} mountOnEnter unmountOnExit timeout={500}>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Delete Channel\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <Typography variant=\"body1\" paragraph>\r\n              {' '}\r\n              Are you sure you want to delete - {activeChannel.split('-')[0]}{' '}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'green', marginRight: '8px' }}\r\n              onClick={() => handleDeleteChannel(channelName, activeChannel.split('-')[1])}\r\n            >\r\n              Yes\r\n            </Button>\r\n            <Button\r\n              className=\"modal-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ backgroundColor: 'red', marginLeft: '8px' }}\r\n              onClick={() => handleSnackMessage('Not deleting channel', false)}\r\n            >\r\n              No\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  if (modalType === 'server-create-join')\r\n    return (\r\n      <Paper className=\"container-prompt\">\r\n        {renderMainServer()}\r\n        {renderServerCreate()}\r\n        {renderServerJoin()}\r\n      </Paper>\r\n    );\r\n  else if (modalType === 'channel-create') {\r\n    return <Paper className=\"container-prompt\">{renderChannelCreate()}</Paper>;\r\n  } else if (modalType === 'server-rename') {\r\n    return <Paper className=\"container-prompt\">{renderServerRename()}</Paper>;\r\n  } else if (modalType === 'channel-rename') {\r\n    return <Paper className=\"container-prompt\">{renderChannelRename()}</Paper>;\r\n  } else if (modalType === 'channel-delete') {\r\n    return <Paper className=\"container-prompt\">{renderChannelDelete()}</Paper>;\r\n  } else if (modalType === 'server-delete') {\r\n    return <Paper className=\"container-prompt\">{renderServerDelete()}</Paper>;\r\n  } else return null;\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Modal } from '@material-ui/core';\r\n\r\nimport SnackBarContent from '../SnackBar/SnackBarContent';\r\nimport PrivateMessageUserList from './PrivateMessageUserList';\r\nimport ChannelList from './ChannelList';\r\nimport ServerList from './ServerList';\r\nimport ActionsModal from '../ActionsModal/ActionsModal';\r\nimport { loadUserData } from '../../actions';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface SidebarProps {\r\n  setDrawerVisible?: (drawerVisible: boolean) => void;\r\n}\r\n\r\nexport default function Sidebar(props: SidebarProps) {\r\n  // Get from Redux Store\r\n  const user = useSelector((state: StoreState) => state.user);\r\n  const { activeView } = useSelector((state: StoreState) => state.chat);\r\n\r\n  // Dispatch\r\n  const dispatch = useDispatch();\r\n\r\n  // Get props from parent (Used when Sidebar is rendered by header on mobile)\r\n  const { setDrawerVisible } = props;\r\n\r\n  // Local state\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [modalType, setModalType] = useState('');\r\n  const [snackContent, setSnackContent] = useState('');\r\n  const [snackVisible, setSnackVisible] = useState(false);\r\n\r\n  // Handles Success of Modal Server Create / Join\r\n  // Closes Modal and show Snackbar with Create / Join Messsage\r\n  const handleSnackMessage = (response: string, pass: boolean) => {\r\n    if (response !== null) {\r\n      setModalVisible(false);\r\n      setSnackVisible(true);\r\n      setSnackContent(response);\r\n      if (pass) dispatch(loadUserData(user.userId));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"sidebar-container\">\r\n      <ServerList setModalVisible={setModalVisible} setModalType={setModalType} />\r\n      {activeView === 'servers' ? (\r\n        <ChannelList\r\n          setDrawerVisible={setDrawerVisible}\r\n          setModalVisible={setModalVisible}\r\n          setModalType={setModalType}\r\n          handleSnackMessage={handleSnackMessage}\r\n        />\r\n      ) : (\r\n        <PrivateMessageUserList />\r\n      )}\r\n      <Modal\r\n        open={modalVisible}\r\n        aria-labelledby=\"server create modal\"\r\n        aria-describedby=\"create a server\"\r\n        className=\"modal-wrapper\"\r\n        onClose={() => setModalVisible(false)}\r\n      >\r\n        <ActionsModal handleSnackMessage={handleSnackMessage} modalType={modalType} />\r\n      </Modal>\r\n      <SnackBarContent visible={snackVisible} setVisible={setSnackVisible} content={snackContent} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, ChangeEvent } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport 'emoji-mart/css/emoji-mart.css';\r\nimport { Picker } from 'emoji-mart';\r\nimport SmileyFace from '@material-ui/icons/SentimentVerySatisfied';\r\nimport { StoreState } from '../../reducers';\r\nimport { sendMessage, sendPrivateMessage } from '../../actions';\r\nimport { SendMessageData, SendPrivateMessageData } from '../../actions/types';\r\n\r\nexport default function SendMessage() {\r\n  // Get State from Redux Store\r\n  const { activeServer, activeChannel, activeView, activePMUser } = useSelector((state: StoreState) => state.chat);\r\n  const { userName } = useSelector((state: StoreState) => state.user);\r\n  const dispatch = useDispatch();\r\n\r\n  // Local state\r\n  const [chatMessage, setChatMessage] = useState('');\r\n  const [emojiMenuVisible, setEmojiMenuVisible] = useState(false);\r\n  const [placeholderTitle, setPlaceholderTitle] = useState('');\r\n\r\n  // Check active view to determine where we send our messages\r\n  useEffect(() => {\r\n    if (activeView === 'servers') {\r\n      setPlaceholderTitle(activeChannel.split('-')[0]);\r\n    } else if (activeView === 'home') {\r\n      setPlaceholderTitle(activePMUser);\r\n    }\r\n  }, [activeView, activeChannel, activePMUser]);\r\n\r\n  // Checks is message is valid (not just spaces)\r\n  function isValidMessage(msg: string) {\r\n    let validMessage = true;\r\n    // Check if empty stirng\r\n    if (msg.trim() === '') validMessage = false;\r\n    return validMessage;\r\n  }\r\n\r\n  // Will format out multiple line breaks to 2 max\r\n  function formatMessage(msg: string) {\r\n    return msg.replace(/(\\r\\n|\\r|\\n){3,}/g, '$1\\n\\n');\r\n  }\r\n\r\n  // Handles submission of messages\r\n  // Dispatches event and sets TextField value to empty\r\n  function handleSubmit(message: SendMessageData | SendPrivateMessageData) {\r\n    if (isValidMessage(message.msg)) {\r\n      message.msg = formatMessage(message.msg);\r\n      // Send message to server, or user\r\n      if (activeView === 'servers' && message.type === 'channelMessage') {\r\n        dispatch(sendMessage(message));\r\n      } else if (activeView === 'home' && message.type === 'privateMessage') {\r\n        dispatch(sendPrivateMessage(message));\r\n      }\r\n      setChatMessage('');\r\n    } else {\r\n      // throw some error\r\n    }\r\n  }\r\n\r\n  // Handles enter event to submit message\r\n  function handleKeyPress(e: any) {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      if (activeView === 'servers')\r\n        handleSubmit({\r\n          server: activeServer,\r\n          channel: activeChannel,\r\n          from: userName,\r\n          msg: chatMessage,\r\n          type: 'channelMessage'\r\n        });\r\n      else if (activeView === 'home')\r\n        handleSubmit({ from: userName, to: activePMUser, msg: chatMessage, type: 'privateMessage' });\r\n    }\r\n  }\r\n\r\n  // Handles changes in message box (catches enter to not send new lines. (Must send SHIFT+ENTER))\r\n  function handleOnChange(e: React.ChangeEvent<HTMLTextAreaElement>) {\r\n    if (e.target.value !== '\\n') setChatMessage(e.target.value);\r\n  }\r\n\r\n  // When click emoji, close the menu\r\n  function handleEmojiClick(e: any) {\r\n    setChatMessage(chatMessage + e.native);\r\n    setEmojiMenuVisible(false);\r\n  }\r\n\r\n  // Closes emoji menu when clicked outside the div\r\n  window.onclick = (e: any) => {\r\n    if (String(e.target.className).includes('send-message-emoji-menu')) setEmojiMenuVisible(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"send-message-border\" />\r\n      <div className=\"send-message-container\">\r\n        <TextareaAutosize\r\n          aria-label=\"empty textarea\"\r\n          placeholder={`Message  #${placeholderTitle}`}\r\n          className=\"message-text-area\"\r\n          value={chatMessage}\r\n          onChange={e => handleOnChange(e)}\r\n          onKeyPress={e => handleKeyPress(e)}\r\n        />\r\n        <SmileyFace className=\"send-message-emoji-button\" onClick={() => setEmojiMenuVisible(!emojiMenuVisible)} />\r\n      </div>\r\n      <div className={emojiMenuVisible ? 'send-message-emoji-menu show' : 'send-message-emoji-menu hide'}>\r\n        <div className=\"emoji-wrapper\">\r\n          <Picker set=\"emojione\" onSelect={e => handleEmojiClick(e)} />\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Card, Typography, makeStyles, TextField } from '@material-ui/core';\r\nimport { sendPrivateMessage, changeView, changePMUser } from '../../actions';\r\n\r\nconst useStyle = makeStyles(theme => ({\r\n  card: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n    width: 250,\r\n    background: '#2f3136'\r\n  },\r\n  cardHeader: {\r\n    background: '#202225',\r\n    width: '100%'\r\n  },\r\n  image: {\r\n    marginTop: '1em',\r\n    marginBottom: '8px'\r\n  },\r\n  cardInput: {\r\n    padding: '1em'\r\n  },\r\n  input: {\r\n    height: '38px'\r\n  }\r\n}));\r\n\r\nexport default function UserInfo(props) {\r\n\r\n  // Get state from redux store\r\n  const user = useSelector(state => state.user);\r\n  const dispatch = useDispatch();\r\n\r\n  const { userName, setUserInfoVisible } = props;\r\n  const classes = useStyle();\r\n  const [messageText, setMessageText] = useState('');\r\n\r\n  // Handles keypress and calls the callback method\r\n  const handleKeyPress = (e, callbackMethod) => {\r\n    if (e.key === \"Enter\") {\r\n      callbackMethod();\r\n    }\r\n  }\r\n\r\n  // Calls API to send a Private message\r\n  const handleSendPrivateMessage = (messageText, userName) => {\r\n    const msg = { \"from\": user.userName, \"msg\": messageText, \"to\": userName };\r\n    dispatch(sendPrivateMessage(msg));\r\n    dispatch(changeView('home'));\r\n    dispatch(changePMUser(msg.to.toLowerCase()));\r\n    setUserInfoVisible(false);\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.card}>\r\n      <div className={classes.cardHeader}>\r\n        <img src={process.env.PUBLIC_URL + \"/user.png\"} alt=\"user-icon\" className={classes.image} />\r\n        <Typography variant='body1' gutterBottom>{userName}</Typography>\r\n      </div>\r\n      <div className={classes.cardInput}>\r\n        <TextField\r\n          id=\"user-private-message\"\r\n          label={`Private message`}\r\n          placeholder={`Message @ ${userName}`}\r\n          value={messageText}\r\n          onChange={(e) => setMessageText(e.target.value)}\r\n          onKeyPress={(e) => handleKeyPress(e, () => handleSendPrivateMessage(messageText, userName))}\r\n          variant=\"outlined\"\r\n          InputProps={{\r\n            className: classes.input\r\n          }}\r\n          InputLabelProps={{\r\n            shrink: true\r\n          }}\r\n        />\r\n      </div>\r\n    </Card>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { List, ListItem, ListItemAvatar, Avatar, ListItemText, Popover } from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport UserInfo from '../UserInfo/UserInfo';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function ActiveUserList() {\r\n  // Get user list from redux store\r\n  const { activeUserList } = useSelector((state: StoreState) => state.chat);\r\n\r\n  // Local state\r\n  const [userInfoVisible, setUserInfoVisible] = useState(false);\r\n  const [userName, setUserName] = useState('');\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  // Handles clicks for setting anchor to User Info (To private message)\r\n  const handleUserClick = (e: any, userName: string) => {\r\n    setUserName(userName);\r\n    setUserInfoVisible(true);\r\n    setAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  // Closes popup of User Info\r\n  const handlePopoverClose = () => {\r\n    setUserInfoVisible(false);\r\n    setAnchorEl(null);\r\n  };\r\n  return (\r\n    <div className=\"user-list-container\">\r\n      <List className=\"users-list\">\r\n        <ListItem className=\"users-list-title\"> Active Users </ListItem>\r\n        {activeUserList.map(user => {\r\n          return (\r\n            <ListItem button className=\"user-list-item\" onClick={e => handleUserClick(e, user.user_name)}>\r\n              <ListItemAvatar className=\"message-user-icon\">\r\n                <Avatar>\r\n                  <img src={process.env.PUBLIC_URL + '/user.png'} alt=\"user icon\" height=\"48\" />\r\n                  <div className=\"user-list-online\"></div>\r\n                </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText>{user.user_name}</ListItemText>\r\n            </ListItem>\r\n          );\r\n        })}\r\n      </List>\r\n\r\n      <Popover\r\n        id=\"user-info\"\r\n        open={userInfoVisible}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'right'\r\n        }}\r\n      >\r\n        <UserInfo userName={userName} setUserInfoVisible={setUserInfoVisible} />\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { SwipeableDrawer, SvgIcon, Link, Tooltip } from '@material-ui/core';\r\n\r\nimport Sidebar from '../Sidebar/Sidebar';\r\nimport ActiveUserList from '../ActiveUserList/ActiveUserList';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function Header() {\r\n  // Get State from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const { activeChannel, activePMUser, activeView } = chatStore;\r\n\r\n  // Local state\r\n  const [sideBarDrawerVisible, setSideBarDrawerVisible] = useState(false);\r\n  const [userListDrawerVisible, setUserListDrawerVisible] = useState(false);\r\n  const [title, setTitle] = useState('');\r\n\r\n  // On active view change change title\r\n  useEffect(() => {\r\n    if (activeView === 'servers') {\r\n      setTitle(activeChannel.split('-')[0].toLowerCase());\r\n    } else if (activeView === 'home') {\r\n      setTitle(activePMUser);\r\n    }\r\n  }, [activeView, activePMUser, activeChannel]);\r\n\r\n  return (\r\n    <AppBar position=\"static\" className=\"appbar\">\r\n      <Toolbar className=\"navbar\">\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          className=\"menu-burger-button\"\r\n          onClick={() => setSideBarDrawerVisible(true)}\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <SwipeableDrawer\r\n          anchor=\"left\"\r\n          open={sideBarDrawerVisible}\r\n          onClose={() => setSideBarDrawerVisible(false)}\r\n          onOpen={() => setSideBarDrawerVisible(true)}\r\n        >\r\n          <Sidebar setDrawerVisible={setSideBarDrawerVisible} />\r\n        </SwipeableDrawer>\r\n        <SwipeableDrawer\r\n          anchor=\"right\"\r\n          open={userListDrawerVisible}\r\n          onClose={() => setUserListDrawerVisible(false)}\r\n          onOpen={() => setUserListDrawerVisible(true)}\r\n        >\r\n          <ActiveUserList />\r\n        </SwipeableDrawer>\r\n        <Typography variant=\"h6\">{title} </Typography>\r\n        <Link href=\"https://github.com/ericellb/React-Discord-Clone\" target=\"_blank\" style={{ color: 'white' }}>\r\n          <Tooltip title=\"Check me out on Github!\" className=\"tooltip\">\r\n            <IconButton>\r\n              <SvgIcon>\r\n                <path d=\"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z\" />\r\n              </SvgIcon>\r\n            </IconButton>\r\n          </Tooltip>\r\n        </Link>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  Avatar,\r\n  ListItemText,\r\n  Fade,\r\n  Popover,\r\n  CircularProgress\r\n} from '@material-ui/core';\r\nimport moment from 'moment';\r\n//import Code from 'react-code-prettify';\r\nimport UserInfo from '../UserInfo/UserInfo';\r\nimport { StoreState } from '../../reducers';\r\n\r\ninterface MessageList {\r\n  from: string;\r\n  to?: string;\r\n  msg: string;\r\n  date: Date;\r\n}\r\n\r\ndeclare var PR: any;\r\n\r\nexport default function Messages() {\r\n  // Get States from Redux Store\r\n  const chatStore = useSelector((state: StoreState) => state.chat);\r\n  const { activeServer, activeChannel, activeView, activePMUser } = chatStore;\r\n\r\n  // Local states\r\n  const [userInfoVisible, setUserInfoVisible] = useState(false);\r\n  const [messageIndex, setMessageIndex] = useState(12);\r\n  const [loadMessages, setLoadMessages] = useState(false);\r\n  const [userName, setUserName] = useState('');\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  // ref to message container (for keeping scroll to bottom of chat)\r\n  let messageContainerBottomRef = document.getElementById('messagesContainerBottom');\r\n  let messageContainerRef = document.getElementById('messagesContainer');\r\n\r\n  // Get message list from channel or from specific user\r\n  let messages: MessageList[] = [];\r\n  let messagesLength = 0;\r\n  if (activeView === 'servers') {\r\n    messages = chatStore.servers[activeServer]['channels'][activeChannel];\r\n    messagesLength = messages.length;\r\n  } else {\r\n    messages = chatStore.privateMessages[activePMUser];\r\n    // If no messages need to make empty array\r\n    if (messages === undefined) {\r\n      messages = [];\r\n    }\r\n    messagesLength = messages.length;\r\n  }\r\n\r\n  // Scroll to bottom of container if were not loading new messages\r\n  useEffect(() => {\r\n    if (messageContainerBottomRef && messageContainerRef) {\r\n      if (loadMessages) {\r\n        messageContainerRef.scroll(0, 60);\r\n      } else {\r\n        messageContainerBottomRef.scrollIntoView({ block: 'end', behavior: 'smooth' });\r\n      }\r\n    }\r\n  }, [loadMessages, messages, messageContainerRef, messageContainerBottomRef]);\r\n\r\n  // Checks is message is a code block\r\n  const isTextCodeBlock = (message: string) => {\r\n    if (message.startsWith('```') && message.endsWith('```')) return true;\r\n    else return false;\r\n  };\r\n\r\n  // Handles to load more messages when scroll at top\r\n  const handleScrollTop = (e: any) => {\r\n    const element = e.target;\r\n    if (element.scrollTop > 60) {\r\n      setLoadMessages(false);\r\n    }\r\n    if (element.scrollTop === 0) {\r\n      if (messagesLength > messageIndex) {\r\n        setTimeout(() => {\r\n          setLoadMessages(true);\r\n          if (messageIndex + 12 > messagesLength) {\r\n            setMessageIndex(messagesLength);\r\n          } else {\r\n            setMessageIndex(messageIndex + 12);\r\n          }\r\n        }, 400);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Formats the code block\r\n  const formatCode = (message: string) => {\r\n    return message.split('```')[1];\r\n  };\r\n\r\n  // Handles clicks for setting anchor to User Info (To private message)\r\n  const handleUserClick = (e: any, userName: string) => {\r\n    setUserName(userName);\r\n    setUserInfoVisible(true);\r\n    setAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  // Closes popup of User Info\r\n  const handlePopoverClose = () => {\r\n    setUserInfoVisible(false);\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  // Load pretty print on every render change\r\n  useEffect(() => {\r\n    PR.prettyPrint();\r\n  });\r\n\r\n  return (\r\n    <div\r\n      id=\"messagesContainer\"\r\n      className=\"messages-container\"\r\n      onScroll={e => handleScrollTop(e)}\r\n      ref={element => (messageContainerRef = element)}\r\n    >\r\n      {messagesLength >= messageIndex ? (\r\n        <div className=\"progress-container\">\r\n          <CircularProgress color=\"primary\" />\r\n        </div>\r\n      ) : null}\r\n      <List>\r\n        {messages !== null\r\n          ? messages.slice(messagesLength - messageIndex, messagesLength).map((message, i) => {\r\n              // Filter for null messages (dummy message on backend should fix...)\r\n              return (\r\n                <Fade in={true} timeout={500}>\r\n                  <ListItem className=\"message\" key={i}>\r\n                    <ListItemAvatar className=\"message-user-icon\">\r\n                      <Avatar>\r\n                        <img\r\n                          onClick={e => handleUserClick(e, message.from)}\r\n                          src={process.env.PUBLIC_URL + '/user.png'}\r\n                          alt=\"user icon\"\r\n                          height=\"48\"\r\n                        />\r\n                      </Avatar>\r\n                    </ListItemAvatar>\r\n                    {isTextCodeBlock(message.msg) ? (\r\n                      <ListItemText\r\n                        primary={\r\n                          <div className=\"message-user\" onClick={e => handleUserClick(e, message.from)}>\r\n                            {message.from.toLowerCase()}\r\n                            <div className=\"message-date\">{` - ${moment(message.date).format('LLL')}`}</div>\r\n                          </div>\r\n                        }\r\n                        secondary={\r\n                          <pre className=\"prettyprint\">\r\n                            <div dangerouslySetInnerHTML={{ __html: formatCode(message.msg) }}></div>\r\n                          </pre>\r\n                        }\r\n                        className=\"message-text\"\r\n                      />\r\n                    ) : (\r\n                      <ListItemText\r\n                        primary={\r\n                          <div className=\"message-user\" onClick={e => handleUserClick(e, message.from)}>\r\n                            {message.from.toLowerCase()}\r\n                            <div className=\"message-date\">{` - ${moment(message.date).format('LLL')}`}</div>\r\n                          </div>\r\n                        }\r\n                        secondary={message.msg}\r\n                        className=\"message-text\"\r\n                      />\r\n                    )}\r\n                  </ListItem>\r\n                </Fade>\r\n              );\r\n            })\r\n          : null}\r\n      </List>\r\n      <div ref={element => (messageContainerBottomRef = element)} id=\"messagesContainerBottom\"></div>\r\n      <Popover\r\n        id=\"user-info\"\r\n        open={userInfoVisible}\r\n        anchorEl={anchorEl}\r\n        onClose={handlePopoverClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'right'\r\n        }}\r\n      >\r\n        <UserInfo userName={userName} setUserInfoVisible={setUserInfoVisible} />\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { loadUserData, updateActiveState, updateActiveUserList } from '../../actions';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport createHashHistory from '../../history';\r\nimport Sidebar from '../Sidebar/Sidebar';\r\nimport SendMessage from '../SendMessage/SendMessage';\r\nimport Header from '../Header/Header';\r\nimport Messages from '../Messages/Messages';\r\nimport ActiveUserList from '../ActiveUserList/ActiveUserList';\r\nimport { StoreState } from '../../reducers';\r\n\r\nexport default function Dashboard() {\r\n  // Get State from Redux Store\r\n  const user = useSelector((state: StoreState) => state.user);\r\n  const { activeServer } = useSelector((state: StoreState) => state.chat);\r\n  const dispatch = useDispatch();\r\n\r\n  // Ping server every 5 minutes to update our active status\r\n  // Also fetches new list of active users in activeServer\r\n  const updateActiveStatus = () => {\r\n    dispatch(updateActiveState());\r\n    dispatch(updateActiveUserList(activeServer.split('-')[1]));\r\n    setTimeout(updateActiveStatus, 5 * 60000);\r\n  };\r\n\r\n  // Listens for changes on isSignedIn\r\n  // Gets initial user data upon change\r\n  useEffect(() => {\r\n    if (!user.isSignedIn) {\r\n      createHashHistory.push('/');\r\n    } else {\r\n      dispatch(loadUserData(user.userId));\r\n      updateActiveStatus();\r\n    } // eslint-disable-next-line\r\n  }, [dispatch, user.isSignedIn, user.userId]);\r\n\r\n  // Watches viewport height (fix for mobile address bar size)\r\n  window.addEventListener('resize', () => {\r\n    let vh = window.innerHeight * 0.01;\r\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\r\n  });\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <div className=\"grid-container\">\r\n        <div className=\"sidebar-grid\">\r\n          <Sidebar />\r\n        </div>\r\n\r\n        <div className=\"messages-grid\">\r\n          <Header />\r\n          <Messages />\r\n        </div>\r\n\r\n        <div className=\"user-list-grid\">\r\n          <ActiveUserList />\r\n        </div>\r\n\r\n        <div className=\"send-messages-grid\">\r\n          <SendMessage />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, KeyboardEvent } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport {\r\n  Paper,\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  CardActionArea,\r\n  CardMedia,\r\n  Slide,\r\n  TextField,\r\n  Grid,\r\n  IconButton,\r\n  Checkbox\r\n} from '@material-ui/core';\r\nimport { GroupAdd, Person, ArrowBack } from '@material-ui/icons';\r\nimport axios from '../Api/api';\r\n\r\nimport createHashHistory from '../../history';\r\nimport { signIn } from '../../actions';\r\n\r\nexport default function Auth() {\r\n  // Dispatch\r\n  const dispatch = useDispatch();\r\n\r\n  // Local state to control Modal Windows + Data fields\r\n  const [mainVisible, setMainVisible] = useState(true);\r\n  const [mainDirection, setMainDirection]: any = useState('left');\r\n  const [createVisible, setCreateVisible] = useState(false);\r\n  const [createDirection, setCreateDirection]: any = useState('left');\r\n  const [loginVisible, setLoginVisible] = useState(false);\r\n  const [loginDirection, setLoginDirection]: any = useState('left');\r\n  const [userName, setUserName] = useState('');\r\n  const [userNameError, setUserNameError] = useState(false);\r\n  const [userNameErrorMsg, setUserNameErrorMsg] = useState('');\r\n  const [userPass, setUserPass] = useState('');\r\n  const [userPassError, setUserPassError] = useState(false);\r\n  const [userPassErrorMsg, setUserPassErrorMsg] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n\r\n  // Shows the main modal (sets transition directions and views to visible / non visible)\r\n  const showMain = () => {\r\n    setMainDirection('left');\r\n    setMainVisible(true);\r\n    setCreateVisible(false);\r\n    setCreateDirection('right');\r\n    setLoginVisible(false);\r\n    setLoginDirection('right');\r\n  };\r\n\r\n  // Handles showing the Join Server window\r\n  const showCreateAccount = () => {\r\n    setCreateDirection('left');\r\n    setMainDirection('right');\r\n    setCreateVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Handles showing the Create Server window\r\n  const showLoginAccount = () => {\r\n    setLoginDirection('left');\r\n    setMainDirection('right');\r\n    setLoginVisible(true);\r\n    setMainVisible(false);\r\n  };\r\n\r\n  // Handles and checks keypress and calls the callback method\r\n  const handleKeyPress = (e: KeyboardEvent, callBack: Function) => {\r\n    if (e.key === 'Enter') {\r\n      callBack();\r\n    }\r\n  };\r\n\r\n  // Validates input and calls callback function\r\n  const handleOnSubmit = (userName: string, userPass: string, callBack: Function) => {\r\n    let error = false;\r\n    if (userName === '') {\r\n      setUserNameError(true);\r\n      setUserNameErrorMsg('Name cannot be empty');\r\n      error = true;\r\n    } else setUserNameError(false);\r\n    if (userPass.length < 6) {\r\n      setUserPassError(true);\r\n      setUserPassErrorMsg('Passwords must be 6 characters');\r\n      error = true;\r\n    } else setUserPassError(false);\r\n\r\n    if (!error) {\r\n      callBack();\r\n    }\r\n  };\r\n\r\n  // Handles creation of account and calls sign in action\r\n  const handleCreateAccount = async (userName: string, userPass: string) => {\r\n    try {\r\n      // encode username and userpass - it may have # $ & + ,  / : ; = ? @ [ ]\r\n      userName = encodeURIComponent(userName);\r\n      userPass = encodeURIComponent(userPass);\r\n\r\n      const response = await axios.post(`/user/create?userName=${userName}&userPass=${userPass}`);\r\n      if (rememberMe) {\r\n        localStorage.setItem('user', JSON.stringify(response.data));\r\n      }\r\n      dispatch(signIn(response.data));\r\n      createHashHistory.push('/dashboard');\r\n    } catch (err) {\r\n      const errorData = err.response.data;\r\n      if (errorData) {\r\n        setUserNameError(true);\r\n        setUserNameErrorMsg(errorData);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Handles login of account and calls sign in action\r\n  const handleLoginAccount = async (userName: string, userPass: string) => {\r\n    // encode username and userpass - it may have # $ & + ,  / : ; = ? @ [ ]\r\n    userName = encodeURIComponent(userName);\r\n    userPass = encodeURIComponent(userPass);\r\n\r\n    try {\r\n      const response = await axios.get(`/user/login?userName=${userName}&userPass=${userPass}`);\r\n      if (rememberMe) {\r\n        localStorage.setItem('user', JSON.stringify(response.data));\r\n      }\r\n      dispatch(signIn(response.data));\r\n      createHashHistory.push('/dashboard');\r\n    } catch (err) {\r\n      const errorData = err.response.data;\r\n      if (errorData) {\r\n        setUserNameError(true);\r\n        setUserNameErrorMsg(errorData);\r\n        setUserPassError(true);\r\n        setUserPassErrorMsg(errorData);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Renders options to Create or Login to account\r\n  const renderMain = () => {\r\n    return (\r\n      <Slide direction={mainDirection} in={mainVisible} timeout={350} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\r\n          <Grid item sm={12} xs={12}>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create an account, or sign in!\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showCreateAccount()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"primary\" gutterBottom>\r\n                    Create\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Create a new account.\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <GroupAdd className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"primary\">\r\n                    Create\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Card className=\"grid-card\">\r\n              <CardActionArea onClick={() => showLoginAccount()}>\r\n                <CardContent>\r\n                  <Typography variant=\"h5\" color=\"secondary\" gutterBottom>\r\n                    Login\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" paragraph>\r\n                    Sign in to an existing account.\r\n                  </Typography>\r\n                  <CardMedia>\r\n                    <Person className=\"modal-card-icon\" />\r\n                  </CardMedia>\r\n                  <Button variant=\"contained\" color=\"secondary\">\r\n                    Login{' '}\r\n                  </Button>\r\n                </CardContent>\r\n              </CardActionArea>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the form to create an account\r\n  const renderCreateAccount = () => {\r\n    return (\r\n      <Slide direction={createDirection} in={createVisible} timeout={350} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={1} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <IconButton onClick={showMain}>\r\n              <ArrowBack />\r\n            </IconButton>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Create Account\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              value={userName}\r\n              error={userNameError}\r\n              helperText={userNameErrorMsg}\r\n              onChange={e => setUserName(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleCreateAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={userPass}\r\n              error={userPassError}\r\n              helperText={userPassErrorMsg}\r\n              onChange={e => setUserPass(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleCreateAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <div>\r\n              Remember Me <Checkbox value={rememberMe} onChange={e => setRememberMe(e.target.checked)} />\r\n            </div>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleOnSubmit(userName, userPass, () => handleCreateAccount(userName, userPass))}\r\n            >\r\n              Create\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  // Renders the form to login to account\r\n  const renderLoginAccount = () => {\r\n    return (\r\n      <Slide direction={loginDirection} in={loginVisible} timeout={350} mountOnEnter unmountOnExit>\r\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12}>\r\n            <IconButton onClick={showMain}>\r\n              <ArrowBack />\r\n            </IconButton>\r\n            <Typography variant=\"h5\" color=\"primary\" align=\"center\">\r\n              Login Account\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              value={userName}\r\n              error={userNameError}\r\n              helperText={userNameErrorMsg}\r\n              onChange={e => setUserName(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleLoginAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-textfield\">\r\n            <TextField\r\n              id=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={userPass}\r\n              error={userPassError}\r\n              helperText={userPassErrorMsg}\r\n              onChange={e => setUserPass(e.target.value)}\r\n              margin=\"dense\"\r\n              autoComplete=\"off\"\r\n              variant=\"outlined\"\r\n              onKeyPress={e =>\r\n                handleKeyPress(e, () =>\r\n                  handleOnSubmit(userName, userPass, () => handleLoginAccount(userName, userPass))\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} className=\"grid-button\">\r\n            <div>\r\n              Remember Me <Checkbox value={rememberMe} onChange={e => setRememberMe(e.target.checked)} />\r\n            </div>\r\n            <Button\r\n              className=\"modal-login-button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => handleOnSubmit(userName, userPass, () => handleLoginAccount(userName, userPass))}\r\n            >\r\n              Login\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Slide>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-wrapper\">\r\n      <Paper className=\"container-prompt\">\r\n        {renderMain()}\r\n        {renderCreateAccount()}\r\n        {renderLoginAccount()}\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\n\r\nimport './App.css';\r\nimport Dashboard from '../Dashboard/Dashboard';\r\nimport Auth from '../Auth/Auth';\r\nimport { signIn } from '../../actions';\r\nimport createHashHistory from '../../history';\r\n\r\nfunction App() {\r\n  // Dispatch\r\n  const dispatch = useDispatch();\r\n\r\n  // Check local storage if have login info\r\n  // Dispatch sign in action with our userId and redirect to dashboard\r\n  const checkLocalStorageAuth = () => {\r\n    let user = JSON.parse(localStorage.getItem('user')!);\r\n    if (user) {\r\n      dispatch(signIn(user));\r\n      createHashHistory.push('/dashboard');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <HashRouter>\r\n        {checkLocalStorageAuth()}\r\n        <Route path=\"/dashboard\" exact component={Dashboard} />\r\n        <Route path=\"/\" exact component={Auth} />\r\n      </HashRouter>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiTooltip: {\r\n      tooltip: {\r\n        fontSize: '14px',\r\n        backgroundColor: 'black'\r\n      }\r\n    },\r\n    MuiSnackbarContent: {\r\n      root: {\r\n        backgroundColor: '#202225',\r\n        color: 'white'\r\n      }\r\n    },\r\n    MuiAppBar: {\r\n      colorPrimary: {\r\n        backgroundColor: '#36393E',\r\n        position: 'absolute'\r\n      }\r\n    }\r\n  },\r\n  palette: {\r\n    type: 'dark',\r\n    primary: {\r\n      main: '#7289da'\r\n    },\r\n    secondary: {\r\n      main: '#3ca374'\r\n    }\r\n  },\r\n  typography: {\r\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n    fontSize: 14,\r\n    fontWeightLight: 400,\r\n    fontWeightRegular: 500,\r\n    fontWeightMedium: 600\r\n  }\r\n});\r\n","import { ACTION, ChatActionTypes } from '../actions/types';\r\n\r\nexport interface ChatStore {\r\n  servers: {\r\n    [serverName: string]: {\r\n      channels: {\r\n        [channelName: string]: { from: string; msg: string; date: Date }[];\r\n      };\r\n    };\r\n  };\r\n  privateMessages: {\r\n    [userPM: string]: { from: string; to: string; msg: string; date: Date }[];\r\n  };\r\n  activeServer: string;\r\n  activeChannel: string;\r\n  activeUserList: { user_name: string }[];\r\n  activeView: string;\r\n  activePMUser: string;\r\n  voiceClients: { userId: string; userName: string }[];\r\n  voiceJoinUserId: string;\r\n  voiceLeaveUserId: string;\r\n  rtcSignalData: { userId: string; ice?: any; sdp?: any };\r\n}\r\n\r\nconst initialState = {\r\n  servers: {\r\n    'Default-FANfDprXmt': {\r\n      channels: {\r\n        'general-0m5vBsRnfd': []\r\n      }\r\n    }\r\n  },\r\n  privateMessages: {},\r\n  activeServer: 'Default-FANfDprXmt',\r\n  activeChannel: 'general-0m5vBsRnfd',\r\n  activeUserList: [],\r\n  activeView: 'servers',\r\n  activePMUser: 'none',\r\n  voiceClients: [{ userId: '', userName: '' }],\r\n  voiceJoinUserId: '',\r\n  voiceLeaveUserId: '',\r\n  rtcSignalData: { userId: '' }\r\n};\r\n\r\nexport const chatReducer = (state: ChatStore = initialState, action: ChatActionTypes): ChatStore => {\r\n  switch (action.type) {\r\n    case ACTION.RECEIVE_SOCKET_MESSAGE:\r\n      let { server, channel, from, msg, date } = action.payload;\r\n      return {\r\n        ...state,\r\n        servers: {\r\n          ...state.servers,\r\n          [server]: {\r\n            ...state.servers[server],\r\n            channels: {\r\n              ...state.servers[server].channels,\r\n              [channel]: [...state.servers[server]['channels'][channel], { from: from, msg: msg, date: date }]\r\n            }\r\n          }\r\n        }\r\n      };\r\n    case ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE:\r\n      if (state.privateMessages[action.payload.user]) {\r\n        return {\r\n          ...state,\r\n          privateMessages: {\r\n            ...state.privateMessages,\r\n            [action.payload.user]: [\r\n              ...state.privateMessages[action.payload.user],\r\n              { from: action.payload.from, to: action.payload.to, msg: action.payload.msg, date: action.payload.date }\r\n            ]\r\n          }\r\n        };\r\n      } else\r\n        return {\r\n          ...state,\r\n          privateMessages: {\r\n            ...state.privateMessages,\r\n            [action.payload.user]: [\r\n              { from: action.payload.from, to: action.payload.to, msg: action.payload.msg, date: action.payload.date }\r\n            ]\r\n          }\r\n        };\r\n    case ACTION.RECEIVE_SOCKET_JOIN_VOICE:\r\n      return {\r\n        ...state,\r\n        voiceClients: action.payload.clients,\r\n        voiceJoinUserId: action.payload.userId,\r\n        voiceLeaveUserId: ''\r\n      };\r\n    case ACTION.RECEIVE_SOCKET_RTC_SIGNAL:\r\n      return { ...state, rtcSignalData: action.payload };\r\n    case ACTION.RECEIVE_SOCKET_LEAVE_VOICE:\r\n      return { ...state, voiceLeaveUserId: action.payload.userId, voiceClients: action.payload.clients };\r\n    case ACTION.CLEAR_VOICE_CONNECTION:\r\n      return { ...state, voiceClients: [], voiceLeaveUserId: '', voiceJoinUserId: '' };\r\n    case ACTION.ADD_CHANNEL:\r\n      return {\r\n        ...state,\r\n        servers: {\r\n          ...state.servers,\r\n          [action.payload.server]: {\r\n            ...state.servers[action.payload.server],\r\n            channels: {\r\n              ...state.servers[action.payload.server].channels,\r\n              [action.payload.channel]: []\r\n            }\r\n          }\r\n        }\r\n      };\r\n    case ACTION.ADD_SERVER:\r\n      return {\r\n        ...state,\r\n        servers: {\r\n          ...state.servers,\r\n          [action.payload.server]: {\r\n            channels: {\r\n              [action.payload.channel]: []\r\n            }\r\n          }\r\n        }\r\n      };\r\n    case ACTION.GET_INITIAL_DATA:\r\n      return {\r\n        ...state,\r\n        servers: action.payload.servers,\r\n        privateMessages: action.payload.privateMessages,\r\n        activeServer: Object.keys(action.payload.servers)[0],\r\n        activeChannel: Object.keys(state.servers[Object.keys(action.payload.servers)[0]].channels)[0]\r\n      };\r\n    case ACTION.CHANGE_SERVER:\r\n      return {\r\n        ...state,\r\n        activeServer: action.payload,\r\n        activeChannel: Object.keys(state.servers[action.payload].channels)[0]\r\n      };\r\n    case ACTION.CHANGE_CHANNEL:\r\n      return { ...state, activeChannel: action.payload };\r\n    case ACTION.CHANGE_VIEW:\r\n      return { ...state, activeView: action.payload, activePMUser: Object.keys(state.privateMessages)[0] };\r\n    case ACTION.CHANGE_PM_USER:\r\n      return { ...state, activePMUser: action.payload };\r\n    case ACTION.UPDATE_ACTIVE_USERS:\r\n      return { ...state, activeUserList: action.payload };\r\n    default:\r\n      return { ...state };\r\n  }\r\n};\r\n","import { ACTION, UserActionTypes } from '../actions/types';\r\n\r\nexport interface UserStore {\r\n  isSignedIn: boolean;\r\n  isAdmin: boolean;\r\n  userId: string;\r\n  userName: string;\r\n}\r\n\r\nconst initialState = {\r\n  isSignedIn: false,\r\n  isAdmin: false,\r\n  userId: '',\r\n  userName: ''\r\n};\r\n\r\nexport const userReducer = (state: UserStore = initialState, action: UserActionTypes): UserStore => {\r\n  switch (action.type) {\r\n    case ACTION.SIGN_IN:\r\n      return { ...state, isSignedIn: true, userId: action.payload.userId, userName: action.payload.userName };\r\n    case ACTION.SIGN_OUT:\r\n      return { ...state, isSignedIn: false, userId: '', userName: '', isAdmin: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { chatReducer, ChatStore } from './chatReducer';\r\nimport { userReducer, UserStore } from './userReducer';\r\nimport { combineReducers } from 'redux';\r\n\r\nexport interface StoreState {\r\n  chat: ChatStore;\r\n  user: UserStore;\r\n}\r\n\r\nexport default combineReducers<StoreState>({\r\n  chat: chatReducer,\r\n  user: userReducer\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App/App';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducers from './reducers';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport { socketMiddleware } from './middleware/socketMiddleware';\r\n\r\nconst baseUrl = process.env.NODE_ENV === 'development' ? 'http://localhost:3001' : process.env.REACT_APP_API_URL;\r\n\r\nconst store = createStore(reducers, composeWithDevTools(applyMiddleware(thunk, socketMiddleware(baseUrl || ''))));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import io from 'socket.io-client';\r\n\r\nimport { ACTION, SocketActions } from '../actions/types';\r\nimport { Dispatch } from 'react';\r\nimport { AnyAction, MiddlewareAPI } from 'redux';\r\n\r\nexport const socketMiddleware = (baseUrl: string) => {\r\n  return (storeAPI: MiddlewareAPI) => {\r\n    let socket = io(baseUrl);\r\n    // eslint-disable-next-line\r\n    let listener: SocketIOClient.Emitter;\r\n\r\n    // Check actions and emit from socket if needed\r\n    return (next: Dispatch<AnyAction>) => (action: SocketActions) => {\r\n      // Send message over socket\r\n      if (action.type === ACTION.SEND_SOCKET_MESSAGE) {\r\n        socket.emit('simple-chat-message', action.payload);\r\n        return;\r\n      }\r\n\r\n      // Send private message over socket\r\n      if (action.type === ACTION.SEND_SOCKET_PRIVATE_MESSAGE) {\r\n        socket.emit('simple-chat-private-message', action.payload);\r\n        return;\r\n      }\r\n\r\n      // Pull sign in action and login to send socket server our userId (identify individual socket connectins)\r\n      if (action.type === ACTION.SIGN_IN) {\r\n        socket.emit('simple-chat-sign-in', action.payload);\r\n        listener = setupSocketListener(socket, storeAPI);\r\n      }\r\n\r\n      // Pull server list off initial data load\r\n      // Use to \"join\" our server \"rooms\"\r\n      if (action.type === ACTION.GET_INITIAL_DATA) {\r\n        // Get list of server Ids (used for \"room\" names on socket server)\r\n        let servers = Object.keys(action.payload.servers);\r\n        let serverIds: string[] = [];\r\n        servers.forEach((server, i) => {\r\n          serverIds[i] = server.split('-')[1];\r\n        });\r\n\r\n        // Subscribe to each server (Creates a room on socket io)\r\n        serverIds.forEach(serverId => {\r\n          socket.emit('subscribe', serverId);\r\n        });\r\n      }\r\n\r\n      // If user creates a server we need to join that room\r\n      if (action.type === ACTION.ADD_SERVER) {\r\n        let serverId = action.payload.server.split('-')[1];\r\n        socket.emit('subscribe', serverId);\r\n      }\r\n\r\n      // Updates our active state on server\r\n      if (action.type === ACTION.UPDATE_ACTIVE_STATE) {\r\n        socket.emit('update-active');\r\n      }\r\n\r\n      if (action.type === ACTION.SEND_SOCKET_JOIN_VOICE) {\r\n        socket.emit('user-join-voice', action.payload);\r\n      }\r\n\r\n      if (action.type === ACTION.SEND_SOCKET_LEAVE_VOICE) {\r\n        socket.emit('user-leave-voice', action.payload);\r\n      }\r\n\r\n      if (action.type === ACTION.SEND_SOCKET_RTC_SIGNAL) {\r\n        socket.emit('voice-signal', action.payload);\r\n      }\r\n\r\n      return next(action);\r\n    };\r\n  };\r\n};\r\n\r\n// Listens on socket with our userId\r\n// Listens to socket server for specific events for messages / private messages\r\n// TODO listen for listen for types of Server + payload of message\r\nfunction setupSocketListener(socket: SocketIOClient.Socket, storeAPI: MiddlewareAPI): SocketIOClient.Emitter {\r\n  return socket.on('update', (action: any) => {\r\n    // Check for action type\r\n    if (action.type === 'message') {\r\n      storeAPI.dispatch({\r\n        type: ACTION.RECEIVE_SOCKET_MESSAGE,\r\n        payload: action.payload\r\n      });\r\n    } else if (action.type === 'private-message') {\r\n      storeAPI.dispatch({\r\n        type: ACTION.RECEIVE_SOCKET_PRIVATE_MESSAGE,\r\n        payload: action.payload\r\n      });\r\n    } else if (action.type === 'user-join-voice') {\r\n      storeAPI.dispatch({\r\n        type: ACTION.RECEIVE_SOCKET_JOIN_VOICE,\r\n        payload: action.payload\r\n      });\r\n    } else if (action.type === 'user-leave-voice') {\r\n      console.log('someone left');\r\n      storeAPI.dispatch({\r\n        type: ACTION.RECEIVE_SOCKET_LEAVE_VOICE,\r\n        payload: action.payload\r\n      });\r\n    } else if (action.type === 'voice-signal') {\r\n      storeAPI.dispatch({\r\n        type: ACTION.RECEIVE_SOCKET_RTC_SIGNAL,\r\n        payload: action.payload\r\n      });\r\n    }\r\n  });\r\n}\r\n"],"sourceRoot":""}